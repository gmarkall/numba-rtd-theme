

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.7. Using the Numba Rewrite Pass for Fun and Optimization &mdash; Numba 0.49.0dev0+639.gacb93f6ea.dirty documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/numba-blue-icon-rgb.svg"/>
  
  
  
    <link rel="canonical" href="http://numba.pydata.org/numba-doc/latest/index.htmldeveloper/rewrites.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7.8. Live Variable Analysis" href="live_variable_analysis.html" />
    <link rel="prev" title="7.6. Notes on Numba Runtime" href="numba-runtime.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00A3E0" >
          

          
            <a href="../index.html" class="icon icon-home"> Numba
          

          
            
            <img src="../_static/numba-white-icon-rgb.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.49
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">1. User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user/5minguide.html">1.1. A ~5 minute guide to Numba</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#how-do-i-get-it">1.1.1. How do I get it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#will-numba-work-for-my-code">1.1.2. Will Numba work for my code?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#what-is-nopython-mode">1.1.3. What is <code class="docutils literal notranslate"><span class="pre">nopython</span></code> mode?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#how-to-measure-the-performance-of-numba">1.1.4. How to measure the performance of Numba?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#how-fast-is-it">1.1.5. How fast is it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#how-does-numba-work">1.1.6. How does Numba work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/5minguide.html#other-things-of-interest">1.1.7. Other things of interest:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/5minguide.html#gpu-targets">1.1.7.1. GPU targets:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/overview.html">1.2. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/installing.html">1.3. Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#compatibility">1.3.1. Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#installing-using-conda-on-x86-x86-64-power-platforms">1.3.2. Installing using conda on x86/x86_64/POWER Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#installing-using-pip-on-x86-x86-64-platforms">1.3.3. Installing using pip on x86/x86_64 Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#enabling-amd-rocm-gpu-support">1.3.4. Enabling AMD ROCm GPU Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#installing-on-linux-armv7-platforms">1.3.5. Installing on Linux ARMv7 Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#installing-on-linux-armv8-aarch64-platforms">1.3.6. Installing on Linux ARMv8 (AArch64) Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#installing-from-source">1.3.7. Installing from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#dependency-list">1.3.8. Dependency List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/installing.html#checking-your-installation">1.3.9. Checking your installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/jit.html">1.4. Compiling Python code with <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/jit.html#basic-usage">1.4.1. Basic usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#lazy-compilation">1.4.1.1. Lazy compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#eager-compilation">1.4.1.2. Eager compilation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/jit.html#calling-and-inlining-other-functions">1.4.2. Calling and inlining other functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jit.html#signature-specifications">1.4.3. Signature specifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jit.html#compilation-options">1.4.4. Compilation options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#nopython">1.4.4.1. <code class="docutils literal notranslate"><span class="pre">nopython</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#nogil">1.4.4.2. <code class="docutils literal notranslate"><span class="pre">nogil</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#cache">1.4.4.3. <code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/jit.html#parallel">1.4.4.4. <code class="docutils literal notranslate"><span class="pre">parallel</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/generated-jit.html">1.5. Flexible specializations with <code class="docutils literal notranslate"><span class="pre">&#64;generated_jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/generated-jit.html#example">1.5.1. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/generated-jit.html#compilation-options">1.5.2. Compilation options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/vectorize.html">1.6. Creating Numpy universal functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/vectorize.html#the-vectorize-decorator">1.6.1. The <code class="docutils literal notranslate"><span class="pre">&#64;vectorize</span></code> decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/vectorize.html#the-guvectorize-decorator">1.6.2. The <code class="docutils literal notranslate"><span class="pre">&#64;guvectorize</span></code> decorator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/vectorize.html#overwriting-input-values">1.6.2.1. Overwriting input values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/vectorize.html#dynamic-universal-functions">1.6.3. Dynamic universal functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/jitclass.html">1.7. Compiling Python classes with <code class="docutils literal notranslate"><span class="pre">&#64;jitclass</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/jitclass.html#basic-usage">1.7.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jitclass.html#specifying-numba-typed-containers-as-class-members">1.7.2. Specifying <code class="docutils literal notranslate"><span class="pre">numba.typed</span></code> containers as class members</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jitclass.html#support-operations">1.7.3. Support operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jitclass.html#limitations">1.7.4. Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jitclass.html#the-decorator-jitclass">1.7.5. The decorator: <code class="docutils literal notranslate"><span class="pre">&#64;jitclass</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/cfunc.html">1.8. Creating C callbacks with <code class="docutils literal notranslate"><span class="pre">&#64;cfunc</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#basic-usage">1.8.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#example">1.8.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#dealing-with-pointers-and-array-memory">1.8.3. Dealing with pointers and array memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#handling-c-structures">1.8.4. Handling C structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/cfunc.html#with-cffi">1.8.4.1. With CFFI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/cfunc.html#with-numba-types-record-make-c-struct">1.8.4.2. With <code class="docutils literal notranslate"><span class="pre">numba.types.Record.make_c_struct</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/cfunc.html#full-example">1.8.4.3. Full example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#signature-specification">1.8.5. Signature specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cfunc.html#compilation-options">1.8.6. Compilation options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/pycc.html">1.9. Compiling code ahead of time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/pycc.html#overview">1.9.1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/pycc.html#benefits">1.9.1.1. Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/pycc.html#limitations">1.9.1.2. Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/pycc.html#usage">1.9.2. Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/pycc.html#standalone-example">1.9.2.1. Standalone example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/pycc.html#distutils-integration">1.9.2.2. Distutils integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/pycc.html#signature-syntax">1.9.2.3. Signature syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/parallel.html">1.10. Automatic parallelization with <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/parallel.html#supported-operations">1.10.1. Supported Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/parallel.html#explicit-parallel-loops">1.10.2. Explicit Parallel Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/parallel.html#examples">1.10.3. Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/parallel.html#diagnostics">1.10.4. Diagnostics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/parallel.html#the-parallel-diagnostics-report-sections">1.10.4.1. The parallel diagnostics report sections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/stencil.html">1.11. Using the <code class="docutils literal notranslate"><span class="pre">&#64;stencil</span></code> decorator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#basic-usage">1.11.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#stencil-parameters">1.11.2. Stencil Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#kernel-shape-inference-and-border-handling">1.11.3. Kernel shape inference and border handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#stencil-decorator-options">1.11.4. Stencil decorator options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/stencil.html#neighborhood">1.11.4.1. <code class="docutils literal notranslate"><span class="pre">neighborhood</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/stencil.html#func-or-mode">1.11.4.2. <code class="docutils literal notranslate"><span class="pre">func_or_mode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/stencil.html#cval">1.11.4.3. <code class="docutils literal notranslate"><span class="pre">cval</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/stencil.html#standard-indexing">1.11.4.4. <code class="docutils literal notranslate"><span class="pre">standard_indexing</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#stencilfunc">1.11.5. <code class="docutils literal notranslate"><span class="pre">StencilFunc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/stencil.html#stencil-invocation-options">1.11.6. Stencil invocation options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/stencil.html#out">1.11.6.1. <code class="docutils literal notranslate"><span class="pre">out</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/withobjmode.html">1.12. Callback into the Python Interpreter from within JIT’ed code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/withobjmode.html#the-objmode-context-manager">1.12.1. The <code class="docutils literal notranslate"><span class="pre">objmode</span></code> context-manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/jit-module.html">1.13. Automatic module jitting with <code class="docutils literal notranslate"><span class="pre">jit_module</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/jit-module.html#example-usage">1.13.1. Example usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/jit-module.html#api">1.13.2. API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/performance-tips.html">1.14. Performance Tips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#no-python-mode-vs-object-mode">1.14.1. No Python mode vs Object mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#loops">1.14.2. Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#fastmath">1.14.3. Fastmath</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#parallel-true">1.14.4. Parallel=True</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#intel-svml">1.14.5. Intel SVML</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/performance-tips.html#linear-algebra">1.14.6. Linear algebra</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/threading-layer.html">1.15. The Threading Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/threading-layer.html#which-threading-layers-are-available">1.15.1. Which threading layers are available?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/threading-layer.html#setting-the-threading-layer">1.15.2. Setting the threading layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/threading-layer.html#selecting-a-threading-layer-for-safe-parallel-execution">1.15.2.1. Selecting a threading layer for safe parallel execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/threading-layer.html#selecting-a-named-threading-layer">1.15.2.2. Selecting a named threading layer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/threading-layer.html#extra-notes">1.15.3. Extra notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/threading-layer.html#setting-the-number-of-threads">1.15.4. Setting the Number of Threads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/threading-layer.html#example-of-limiting-the-number-of-threads">1.15.4.1. Example of Limiting the Number of Threads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/threading-layer.html#api-reference">1.15.4.2. API Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/cli.html">1.16. Command line interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/cli.html#usage">1.16.1. Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cli.html#help">1.16.2. Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cli.html#system-information">1.16.3. System information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/cli.html#debugging">1.16.4. Debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/troubleshoot.html">1.17. Troubleshooting and tips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#what-to-compile">1.17.1. What to compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#my-code-doesn-t-compile">1.17.2. My code doesn’t compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#my-code-has-a-type-unification-problem">1.17.3. My code has a type unification problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#my-code-has-an-untyped-list-problem">1.17.4. My code has an untyped list problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#the-compiled-code-is-too-slow">1.17.5. The compiled code is too slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#disabling-jit-compilation">1.17.6. Disabling JIT compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#debugging-jit-compiled-code-with-gdb">1.17.7. Debugging JIT compiled code with GDB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#example-debug-usage">1.17.7.1. Example debug usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#globally-override-debug-setting">1.17.7.2. Globally override debug setting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#using-numba-s-direct-gdb-bindings-in-nopython-mode">1.17.8. Using Numba’s direct <code class="docutils literal notranslate"><span class="pre">gdb</span></code> bindings in <code class="docutils literal notranslate"><span class="pre">nopython</span></code>  mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#set-up">1.17.8.1. Set up</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#basic-gdb-support">1.17.8.2. Basic <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#running-with-gdb-enabled">1.17.8.3. Running with <code class="docutils literal notranslate"><span class="pre">gdb</span></code> enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#adding-breakpoints-to-code">1.17.8.4. Adding breakpoints to code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#debugging-in-parallel-regions">1.17.8.5. Debugging in parallel regions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#using-the-gdb-command-language">1.17.8.6. Using the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> command language</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#how-does-the-gdb-binding-work">1.17.8.7. How does the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> binding work?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/troubleshoot.html#debugging-cuda-python-code">1.17.9. Debugging CUDA Python code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#using-the-simulator">1.17.9.1. Using the simulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/troubleshoot.html#debug-info">1.17.9.2. Debug Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/faq.html">1.18. Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/faq.html#programming">1.18.1. Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#can-i-pass-a-function-as-an-argument-to-a-jitted-function">1.18.1.1. Can I pass a function as an argument to a jitted function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#numba-doesn-t-seem-to-care-when-i-modify-a-global-variable">1.18.1.2. Numba doesn’t seem to care when I modify a global variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#can-i-debug-a-jitted-function">1.18.1.3. Can I debug a jitted function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#how-can-i-create-a-fortran-ordered-array">1.18.1.4. How can I create a Fortran-ordered array?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#how-can-i-increase-integer-width">1.18.1.5. How can I increase integer width?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#how-can-i-tell-if-parallel-true-worked">1.18.1.6. How can I tell if <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code> worked?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/faq.html#performance">1.18.2. Performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#does-numba-inline-functions">1.18.2.1. Does Numba inline functions?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#does-numba-vectorize-array-computations-simd">1.18.2.2. Does Numba vectorize array computations (SIMD)?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#why-my-loop-is-not-vectorized">1.18.2.3. Why my loop is not vectorized?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#does-numba-automatically-parallelize-code">1.18.2.4. Does Numba automatically parallelize code?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#can-numba-speed-up-short-running-functions">1.18.2.5. Can Numba speed up short-running functions?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#there-is-a-delay-when-jit-compiling-a-complicated-function-how-can-i-improve-it">1.18.2.6. There is a delay when JIT-compiling a complicated function, how can I improve it?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/faq.html#gpu-programming">1.18.3. GPU Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#how-do-i-work-around-the-cuda-intialized-before-forking-error">1.18.3.1. How do I work around the <code class="docutils literal notranslate"><span class="pre">CUDA</span> <span class="pre">intialized</span> <span class="pre">before</span> <span class="pre">forking</span></code> error?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/faq.html#integration-with-other-utilities">1.18.4. Integration with other utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#can-i-freeze-an-application-which-uses-numba">1.18.4.1. Can I “freeze” an application which uses Numba?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#i-get-errors-when-running-a-script-twice-under-spyder">1.18.4.2. I get errors when running a script twice under Spyder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#why-does-numba-complain-about-the-current-locale">1.18.4.3. Why does Numba complain about the current locale?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user/faq.html#miscellaneous">1.18.5. Miscellaneous</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#where-does-the-project-name-numba-come-from">1.18.5.1. Where does the project name “Numba” come from?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#how-do-i-reference-cite-acknowledge-numba-in-other-work">1.18.5.2. How do I reference/cite/acknowledge Numba in other work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user/faq.html#other-related-papers">1.18.5.3. Other related papers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/examples.html">1.19. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/examples.html#mandelbrot">1.19.1. Mandelbrot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/examples.html#moving-average">1.19.2. Moving average</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/examples.html#multi-threading">1.19.3. Multi-threading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/talks.html">1.20. Talks and Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/talks.html#talks-on-numba">1.20.1. Talks on Numba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/talks.html#talks-on-applications-of-numba">1.20.2. Talks on Applications of Numba</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/talks.html#tutorials">1.20.3. Tutorials</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">2. Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/types.html">2.1. Types and signatures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#rationale">2.1.1. Rationale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#signatures">2.1.2. Signatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#basic-types">2.1.3. Basic types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#numbers">2.1.3.1. Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#arrays">2.1.3.2. Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#miscellaneous-types">2.1.3.3. Miscellaneous Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#advanced-types">2.1.4. Advanced types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#inference">2.1.4.1. Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#numpy-scalars">2.1.4.2. Numpy scalars</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#id1">2.1.4.3. Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#optional-types">2.1.4.4. Optional types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/jit-compilation.html">2.2. Just-in-Time compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#jit-functions">2.2.1. JIT functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#generated-jit-functions">2.2.2. Generated JIT functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#dispatcher-objects">2.2.3. Dispatcher objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#vectorized-functions-ufuncs-and-dufuncs">2.2.4. Vectorized functions (ufuncs and DUFuncs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#c-callbacks">2.2.5. C callbacks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/aot-compilation.html">2.3. Ahead-of-Time compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/utils.html">2.4. Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/utils.html#dealing-with-pointers">2.4.1. Dealing with pointers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/envvars.html">2.5. Environment variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#jit-flags">2.5.1. Jit flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#debugging">2.5.2. Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#compilation-options">2.5.3. Compilation options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#caching-options">2.5.4. Caching options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#gpu-support">2.5.5. GPU support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#threading-control">2.5.6. Threading Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pysupported.html">2.6. Supported Python features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#language">2.6.1. Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#constructs">2.6.1.1. Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#functions">2.6.1.2. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#generators">2.6.1.3. Generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#exception-handling">2.6.1.4. Exception handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#built-in-types">2.6.2. Built-in types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#int-bool">2.6.2.1. int, bool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#float-complex">2.6.2.2. float, complex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#str">2.6.2.3. str</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#tuple">2.6.2.4. tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#homogeneous-tuples">2.6.2.5. homogeneous tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#heterogeneous-tuples">2.6.2.6. heterogeneous tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#list">2.6.2.7. list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#set">2.6.2.8. set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#none">2.6.2.9. None</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#bytes-bytearray-memoryview">2.6.2.10. bytes, bytearray, memoryview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#built-in-functions">2.6.3. Built-in functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#hashing">2.6.3.1. Hashing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#standard-library-modules">2.6.4. Standard library modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#array">2.6.4.1. <code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#cmath">2.6.4.2. <code class="docutils literal notranslate"><span class="pre">cmath</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#collections">2.6.4.3. <code class="docutils literal notranslate"><span class="pre">collections</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#ctypes">2.6.4.4. <code class="docutils literal notranslate"><span class="pre">ctypes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#enum">2.6.4.5. <code class="docutils literal notranslate"><span class="pre">enum</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#math">2.6.4.6. <code class="docutils literal notranslate"><span class="pre">math</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#operator">2.6.4.7. <code class="docutils literal notranslate"><span class="pre">operator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#functools">2.6.4.8. <code class="docutils literal notranslate"><span class="pre">functools</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#random">2.6.4.9. <code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#heapq">2.6.4.10. <code class="docutils literal notranslate"><span class="pre">heapq</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#third-party-modules">2.6.5. Third-party modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#cffi">2.6.5.1. <code class="docutils literal notranslate"><span class="pre">cffi</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/numpysupported.html">2.7. Supported NumPy features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#scalar-types">2.7.1. Scalar types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#array-types">2.7.2. Array types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#array-access">2.7.2.1. Array access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#attributes">2.7.2.2. Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#calculation">2.7.2.3. Calculation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#other-methods">2.7.2.4. Other methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#functions">2.7.3. Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#linear-algebra">2.7.3.1. Linear algebra</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#reductions">2.7.3.2. Reductions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#other-functions">2.7.3.3. Other functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#literal-arrays">2.7.3.4. Literal arrays</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#modules">2.7.4. Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#random">2.7.4.1. <code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#stride-tricks">2.7.4.2. <code class="docutils literal notranslate"><span class="pre">stride_tricks</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#standard-ufuncs">2.7.5. Standard ufuncs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#limitations">2.7.5.1. Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#math-operations">2.7.5.2. Math operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#trigonometric-functions">2.7.5.3. Trigonometric functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#bit-twiddling-functions">2.7.5.4. Bit-twiddling functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#comparison-functions">2.7.5.5. Comparison functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#floating-functions">2.7.5.6. Floating functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pysemantics.html">2.8. Deviations from Python Semantics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#exceptions-and-memory-allocation">2.8.1. Exceptions and Memory Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#integer-width">2.8.2. Integer width</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#boolean-inversion">2.8.3. Boolean inversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#global-and-closure-variables">2.8.4. Global and closure variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/fpsemantics.html">2.9. Floating-point pitfalls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/fpsemantics.html#precision-and-accuracy">2.9.1. Precision and accuracy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#math-library-implementations">2.9.1.1. Math library implementations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#linear-algebra">2.9.1.2. Linear algebra</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#mixed-types-operations">2.9.1.3. Mixed-types operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/fpsemantics.html#warnings-and-errors">2.9.2. Warnings and errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/python27-eol.html">2.10. Python 2.7 End of Life Plan</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/python27-eol.html#timeline">2.10.1. Timeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/deprecation.html">2.11. Deprecation Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#suppressing-deprecation-warnings">2.11.1. Suppressing Deprecation warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#deprecation-of-reflection-for-list-and-set-types">2.11.2. Deprecation of reflection for List and Set types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#reason-for-deprecation">2.11.2.1. Reason for deprecation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#example-s-of-the-impact">2.11.2.2. Example(s) of the impact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#schedule">2.11.2.3. Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#recommendations">2.11.2.4. Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#expected-replacement">2.11.2.5. Expected Replacement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit">2.11.3. Deprecation of <span class="xref std std-term">object mode</span> <cite>fall-back</cite> behaviour when using <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id1">2.11.3.1. Reason for deprecation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id2">2.11.3.2. Example(s) of the impact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id3">2.11.3.3. Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id4">2.11.3.4. Recommendations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cuda/index.html">3. Numba for CUDA GPUs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cuda/overview.html">3.1. Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#terminology">3.1.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#programming-model">3.1.2. Programming model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#requirements">3.1.3. Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/overview.html#supported-gpus">3.1.3.1. Supported GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/overview.html#software">3.1.3.2. Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#missing-cuda-features">3.1.4. Missing CUDA Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/kernels.html">3.2. Writing CUDA Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#introduction">3.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#kernel-declaration">3.2.2. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#kernel-invocation">3.2.3. Kernel invocation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#choosing-the-block-size">3.2.3.1. Choosing the block size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#multi-dimensional-blocks-and-grids">3.2.3.2. Multi-dimensional blocks and grids</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#thread-positioning">3.2.4. Thread positioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#absolute-positions">3.2.4.1. Absolute positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#further-reading">3.2.4.2. Further Reading</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/memory.html">3.3. Memory management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#data-transfer">3.3.1. Data transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/memory.html#device-arrays">3.3.1.1. Device arrays</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#pinned-memory">3.3.2. Pinned memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#streams">3.3.3. Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#shared-memory-and-thread-synchronization">3.3.4. Shared memory and thread synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#local-memory">3.3.5. Local memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#constant-memory">3.3.6. Constant memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#deallocation-behavior">3.3.7. Deallocation Behavior</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-functions.html">3.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/cudapysupported.html">3.5. Supported Python features in CUDA Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#language">3.5.1. Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#execution-model">3.5.1.1. Execution Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#constructs">3.5.1.2. Constructs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#built-in-types">3.5.2. Built-in types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#built-in-functions">3.5.3. Built-in functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#standard-library-modules">3.5.4. Standard library modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#cmath">3.5.4.1. <code class="docutils literal notranslate"><span class="pre">cmath</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#math">3.5.4.2. <code class="docutils literal notranslate"><span class="pre">math</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#operator">3.5.4.3. <code class="docutils literal notranslate"><span class="pre">operator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#numpy-support">3.5.5. Numpy support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/intrinsics.html">3.6. Supported Atomic Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/intrinsics.html#example">3.6.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/random.html">3.7. Random Number Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/random.html#example">3.7.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-management.html">3.8. Device management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/device-management.html#device-selection">3.8.1. Device Selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-management.html#the-device-list">3.9. The Device List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/examples.html">3.10. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/examples.html#matrix-multiplication">3.10.1. Matrix multiplication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/simulator.html">3.11. Debugging CUDA Python with the the CUDA Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/simulator.html#using-the-simulator">3.11.1. Using the simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/simulator.html#supported-features">3.11.2. Supported features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/reduction.html">3.12. GPU Reduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/reduction.html#reduce">3.12.1. <code class="docutils literal notranslate"><span class="pre">&#64;reduce</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/reduction.html#class-reduce">3.12.2. class Reduce</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/ufunc.html">3.13. CUDA Ufuncs and Generalized Ufuncs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#example-basic-example">3.13.1. Example: Basic Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#example-calling-device-functions">3.13.2. Example: Calling Device Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#generalized-cuda-ufuncs">3.13.3. Generalized CUDA ufuncs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/ipc.html">3.14. Sharing CUDA Memory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ipc.html#sharing-between-process">3.14.1. Sharing between process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/ipc.html#export-device-array-to-another-process">3.14.1.1. Export device array to another process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/ipc.html#import-ipc-memory-from-another-process">3.14.1.2. Import IPC memory from another process</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/cuda_array_interface.html">3.15. CUDA Array Interface (Version 2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cuda_array_interface.html#python-interface-specification">3.15.1. Python Interface Specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#differences-with-cuda-array-interface-version-0">3.15.1.1. Differences with CUDA Array Interface (Version 0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#differences-with-cuda-array-interface-version-1">3.15.1.2. Differences with CUDA Array Interface (Version 1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#interoperability">3.15.1.3. Interoperability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/faq.html">3.16. CUDA Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/faq.html#nvprof-reports-no-kernels-were-profiled">3.16.1. nvprof reports “No kernels were profiled”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cuda-reference/index.html">4. CUDA Python Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/host.html">4.1. CUDA Host API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#device-management">4.1.1. Device Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#device-detection-and-enquiry">4.1.1.1. Device detection and enquiry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#context-management">4.1.1.2. Context management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#id1">4.1.1.3. Device management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#measurement">4.1.2. Measurement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#profiling">4.1.2.1. Profiling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#events">4.1.2.2. Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#stream-management">4.1.3. Stream Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/kernel.html">4.2. CUDA Kernel API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/kernel.html#kernel-declaration">4.2.1. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/kernel.html#intrinsic-attributes-and-functions">4.2.2. Intrinsic Attributes and Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#thread-indexing">4.2.2.1. Thread Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#memory-management">4.2.2.2. Memory Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#synchronization-and-atomic-operations">4.2.2.3. Synchronization and Atomic Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#memory-fences">4.2.2.4. Memory Fences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#warp-intrinsics">4.2.2.5. Warp Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#integer-intrinsics">4.2.2.6. Integer Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#floating-point-intrinsics">4.2.2.7. Floating Point Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#control-flow-instructions">4.2.2.8. Control Flow Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/memory.html">4.3. Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/memory.html#device-objects">4.3.1. Device Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roc/index.html">5. Numba for AMD ROC GPUs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../roc/overview.html">5.1. Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#terminology">5.1.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#requirements">5.1.2. Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#installation">5.1.3. Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/kernels.html">5.2. Writing HSA Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#introduction">5.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#introduction-for-cuda-programmers">5.2.2. Introduction for CUDA Programmers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#kernel-declaration">5.2.3. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#kernel-invocation">5.2.4. Kernel invocation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../roc/kernels.html#choosing-the-workgroup-size">5.2.4.1. Choosing the workgroup size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../roc/kernels.html#multi-dimensional-workgroup-and-grid">5.2.4.2. Multi-dimensional workgroup and grid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#workitem-positioning">5.2.5. WorkItem positioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/memory.html">5.3. Memory management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#data-transfer">5.3.1. Data transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../roc/memory.html#device-arrays">5.3.1.1. Device arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../roc/memory.html#data-registration">5.3.1.2. Data Registration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#streams">5.3.2. Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#shared-memory-and-thread-synchronization">5.3.3. Shared memory and thread synchronization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/device-functions.html">5.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roc/intrinsics.html">5.5. Supported Atomic Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/intrinsics.html#example">5.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/device-management.html">5.6. The Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roc/ufunc.html">5.7. ROC Ufuncs and Generalized Ufuncs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#basic-roc-ufunc-example">5.7.1. Basic ROC UFunc Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#calling-device-functions-from-roc-ufuncs">5.7.2. Calling Device Functions from ROC UFuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#generalized-roc-ufuncs">5.7.3. Generalized ROC ufuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#async-execution-a-chunk-at-a-time">5.7.4. Async execution: A Chunk at a Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/examples.html">5.8. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/examples.html#matrix-multiplication">5.8.1. Matrix multiplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">6. Extending Numba</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/high-level.html">6.1. High-level extension API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-functions">6.1.1. Implementing functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-methods">6.1.2. Implementing methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-attributes">6.1.3. Implementing attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#importing-cython-functions">6.1.4. Importing Cython Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-intrinsics">6.1.5. Implementing intrinsics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/low-level.html">6.2. Low-level extension API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/low-level.html#typing">6.2.1. Typing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/low-level.html#lowering">6.2.2. Lowering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#native-operations">6.2.2.1. Native operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#constants">6.2.2.2. Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#boxing-and-unboxing">6.2.2.3. Boxing and unboxing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/interval-example.html">6.3. Example: an interval type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#extending-the-typing-layer">6.3.1. Extending the typing layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#creating-a-new-numba-type">6.3.1.1. Creating a new Numba type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#type-inference-for-python-values">6.3.1.2. Type inference for Python values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#type-inference-for-operations">6.3.1.3. Type inference for operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#extending-the-lowering-layer">6.3.2. Extending the lowering layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#defining-the-data-model-for-native-intervals">6.3.2.1. Defining the data model for native intervals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#exposing-data-model-attributes">6.3.2.2. Exposing data model attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#exposing-a-property">6.3.2.3. Exposing a property</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#implementing-the-constructor">6.3.2.4. Implementing the constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#boxing-and-unboxing">6.3.2.5. Boxing and unboxing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#using-it">6.3.3. Using it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#conclusion">6.3.4. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/overloading-guide.html">6.4. A guide to using <code class="docutils literal notranslate"><span class="pre">&#64;overload</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/overloading-guide.html#concrete-example">6.4.1. Concrete Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/overloading-guide.html#implementing-overload-for-numpy-functions">6.4.2. Implementing <code class="docutils literal notranslate"><span class="pre">&#64;overload</span></code> for NumPy functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/entrypoints.html">6.5. Registering Extensions with Entry Points</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/entrypoints.html#adding-support-for-the-init-entry-point">6.5.1. Adding Support for the “Init” Entry Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/entrypoints.html#testing-your-entry-point">6.5.2. Testing your Entry Point</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">7. Developer Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing.html">7.1. Contributing to Numba</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#communication">7.1.1. Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#mailing-list">7.1.1.1. Mailing-list</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#real-time-chat">7.1.1.2. Real-time Chat</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#weekly-meetings">7.1.1.3. Weekly Meetings</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#bug-tracker">7.1.1.4. Bug tracker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#getting-set-up">7.1.2. Getting set up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#build-environment">7.1.2.1. Build environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#building-numba">7.1.2.2. Building Numba</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#running-tests">7.1.2.3. Running tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#development-rules">7.1.3. Development rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#code-reviews">7.1.3.1. Code reviews</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#coding-conventions">7.1.3.2. Coding conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#stability">7.1.3.3. Stability</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#platform-support">7.1.3.4. Platform support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#documentation">7.1.4. Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#main-documentation">7.1.4.1. Main documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="contributing.html#web-site-homepage">7.1.4.2. Web site homepage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="repomap.html">7.2. A Map of the Numba Repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="repomap.html#support-files">7.2.1. Support Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#build-and-packaging">7.2.1.1. Build and Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#continuous-integration">7.2.1.2. Continuous Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#documentation-examples">7.2.1.3. Documentation / Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="repomap.html#numba-source-code">7.2.2. Numba Source Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#public-api">7.2.2.1. Public API</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#dispatching">7.2.2.2. Dispatching</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#compiler-pipeline">7.2.2.3. Compiler Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#type-management">7.2.2.4. Type Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#compiled-extensions">7.2.2.5. Compiled Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#misc-support">7.2.2.6. Misc Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#core-python-data-types">7.2.2.7. Core Python Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#math">7.2.2.8. Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#parallelaccelerator">7.2.2.9. ParallelAccelerator</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#stencil">7.2.2.10. Stencil</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#debugging-support">7.2.2.11. Debugging Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#type-signatures-cpu">7.2.2.12. Type Signatures (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#target-implementations-cpu">7.2.2.13. Target Implementations (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#ufunc-compiler-and-runtime">7.2.2.14. Ufunc Compiler and Runtime</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#unit-tests-cpu">7.2.2.15. Unit Tests (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#command-line-utilities">7.2.2.16. Command Line Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#cuda-gpu-target">7.2.2.17. CUDA GPU Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="repomap.html#rocm-gpu-target">7.2.2.18. ROCm GPU Target</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">7.3. Numba architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#introduction">7.3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#compiler-architecture">7.3.2. Compiler architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#contexts">7.3.3. Contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html#compiler-stages">7.3.4. Compiler stages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-1-analyze-bytecode">7.3.4.1. Stage 1: Analyze bytecode</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-2-generate-the-numba-ir">7.3.4.2. Stage 2: Generate the Numba IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-3-macro-expansion">7.3.4.3. Stage 3: Macro expansion</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-4-rewrite-untyped-ir">7.3.4.4. Stage 4: Rewrite untyped IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-5-infer-types">7.3.4.5. Stage 5: Infer types</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-6a-rewrite-typed-ir">7.3.4.6. Stage 6a: Rewrite typed IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-6b-perform-automatic-parallelization">7.3.4.7. Stage 6b: Perform Automatic Parallelization</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-7a-generate-nopython-llvm-ir">7.3.4.8. Stage 7a: Generate nopython LLVM IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-7b-generate-object-mode-llvm-ir">7.3.4.9. Stage 7b: Generate object mode LLVM IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="architecture.html#stage-8-compile-llvm-ir-to-machine-code">7.3.4.10. Stage 8: Compile LLVM IR to machine code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dispatching.html">7.4. Polymorphic dispatching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dispatching.html#requirements">7.4.1. Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#compile-time-vs-run-time">7.4.1.1. Compile-time vs. run-time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dispatching.html#type-resolution">7.4.2. Type resolution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#typecodes">7.4.2.1. Typecodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#hard-coded-fast-paths">7.4.2.2. Hard-coded fast paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#fingerprint-based-typecode-cache">7.4.2.3. Fingerprint-based typecode cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#summary">7.4.2.4. Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dispatching.html#specialization-selection">7.4.3. Specialization selection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#implicit-conversion-rules">7.4.3.1. Implicit conversion rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#candidates-and-best-match">7.4.3.2. Candidates and best match</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#implementation">7.4.3.3. Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="dispatching.html#id1">7.4.3.4. Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dispatching.html#miscellaneous">7.4.4. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="generators.html">7.5. Notes on generators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generators.html#terminology">7.5.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="generators.html#function-analysis">7.5.2. Function analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="generators.html#the-generator-structure">7.5.3. The generator structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generators.html#layout">7.5.3.1. Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="generators.html#allocation">7.5.3.2. Allocation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="generators.html#compiling-to-native-code">7.5.4. Compiling to native code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generators.html#the-next-function">7.5.4.1. The next() function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="numba-runtime.html">7.6. Notes on Numba Runtime</a><ul>
<li class="toctree-l3"><a class="reference internal" href="numba-runtime.html#memory-management">7.6.1. Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#cooperating-with-cpython">7.6.1.1. Cooperating with CPython</a></li>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#compiler-side-cooperation">7.6.1.2. Compiler-side Cooperation</a></li>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#optimizations">7.6.1.3. Optimizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#quirks">7.6.1.4. Quirks</a></li>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#debugging-leaks">7.6.1.5. Debugging Leaks</a></li>
<li class="toctree-l4"><a class="reference internal" href="numba-runtime.html#debugging-leaks-in-c">7.6.1.6. Debugging Leaks in C</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="numba-runtime.html#recursion-support">7.6.2. Recursion Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="numba-runtime.html#using-the-nrt-from-c-code">7.6.3. Using the NRT from C code</a></li>
<li class="toctree-l3"><a class="reference internal" href="numba-runtime.html#future-plan">7.6.4. Future Plan</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.7. Using the Numba Rewrite Pass for Fun and Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">7.7.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rewriting-passes">7.7.2. Rewriting Passes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-rewrite-base-class">7.7.2.1. The <code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code> Base Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subclassing-rewrite">7.7.2.2. Subclassing <code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#overloading-rewrite-match">7.7.2.3. Overloading <code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.match()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#overloading-rewrite-apply">7.7.2.4. Overloading <code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.apply()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-rewrite-registry">7.7.3. The Rewrite Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case-study-array-expressions">7.7.4. Case study: Array Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-rewritearrayexprs-match-method">7.7.4.1. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code> method</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-rewritearrayexprs-apply-method">7.7.4.2. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code> method</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-lower-array-expr-function">7.7.4.3. The <code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conclusions-and-caveats">7.7.5. Conclusions and Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="live_variable_analysis.html">7.8. Live Variable Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="live_variable_analysis.html#notes-on-behavior-of-the-live-variable-analysis">7.8.1. Notes on behavior of the live variable analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="live_variable_analysis.html#variable-deleted-before-definition">7.8.1.1. Variable deleted before definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="listings.html">7.9. Listings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="listings.html#new-style-listings">7.9.1. New style listings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen_builtins_listing.html">7.9.1.1. Listings for builtins</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen_math_listing.html">7.9.1.2. Listings for math</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen_cmath_listing.html">7.9.1.3. Listings for cmath</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen_numpy_listing.html">7.9.1.4. Listings for numpy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="listings.html#old-style-listings">7.9.2. Old style listings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen_lower_listing.html">7.9.2.1. Lowering Listing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stencil.html">7.10. Notes on stencils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#the-stencil-decorator">7.10.1. The stencil decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#handling-the-three-modes">7.10.2. Handling the three modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#outside-jit-context">7.10.2.1. Outside jit context</a></li>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#jit-without-parallel-true">7.10.2.2. Jit without <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#jit-with-parallel-true">7.10.2.3. Jit with <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#creating-the-stencil-function">7.10.3. Creating the stencil function</a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#exceptions-raised">7.10.4. Exceptions raised</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="custom_pipeline.html">7.11. Customizing the Compiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="custom_pipeline.html#implementing-a-compiler-pass">7.11.1. Implementing a compiler pass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_pipeline.html#compiler-pass-classes">7.11.1.1. Compiler pass classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="custom_pipeline.html#debugging-compiler-passes">7.11.2. Debugging compiler passes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="custom_pipeline.html#observing-ir-changes">7.11.2.1. Observing IR Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom_pipeline.html#pass-execution-times">7.11.2.2. Pass execution times</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inlining.html">7.12. Notes on Inlining</a><ul>
<li class="toctree-l3"><a class="reference internal" href="inlining.html#example-using-numba-jit">7.12.1. Example using <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.jit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="inlining.html#example-using-numba-extending-overload">7.12.2. Example using <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.extending.overload()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="environment.html">7.13. Environment Object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="environment.html#the-implementation">7.13.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="environment.html#serialization">7.13.1.1. Serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="environment.html#usage">7.13.1.2. Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hashing.html">7.14. Notes on Hashing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hashing.html#the-implementation">7.14.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="hashing.html#unicode-hash-cache-differences">7.14.1.1. Unicode hash cache differences</a></li>
<li class="toctree-l4"><a class="reference internal" href="hashing.html#the-accommodation-of-pythonhashseed">7.14.1.2. The accommodation of <code class="docutils literal notranslate"><span class="pre">PYTHONHASHSEED</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">7.15. Notes on Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="caching.html#the-implementation">7.15.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="caching.html#requirements-for-cacheability">7.15.1.1. Requirements for Cacheability</a></li>
<li class="toctree-l4"><a class="reference internal" href="caching.html#features-compatible-with-caching">7.15.1.2. Features Compatible with Caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="caching.html#caching-limitations">7.15.1.3. Caching Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="caching.html#cache-sharing">7.15.1.4. Cache Sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="caching.html#cache-clearing">7.15.1.5. Cache Clearing</a></li>
<li class="toctree-l4"><a class="reference internal" href="caching.html#related-environment-variables">7.15.1.6. Related Environment Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="threading_implementation.html">7.16. Notes on Numba’s threading implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="threading_implementation.html#thread-masking">7.16.1. Thread masking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="threading_implementation.html#programming-model">7.16.1.1. Programming model</a></li>
<li class="toctree-l4"><a class="reference internal" href="threading_implementation.html#the-implementation">7.16.1.2. The Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="threading_implementation.html#caveats">7.16.1.3. Caveats</a></li>
<li class="toctree-l4"><a class="reference internal" href="threading_implementation.html#use-in-code-generation">7.16.1.4. Use in Code Generation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="literal.html">7.17. Notes on Literal Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="literal.html#literal-type">7.17.1. <code class="docutils literal notranslate"><span class="pre">Literal</span></code> Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="literal.html#specifying-for-literal-typing">7.17.2. Specifying for Literal Typing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="literal.html#code-example">7.17.2.1. Code Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="literal.html#internal-details">7.17.2.2. Internal Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="literal.html#inside-extensions">7.17.3. Inside Extensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">7.18. Notes on Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging.html#memcheck">7.18.1. Memcheck</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html">7.19. Numba Project Roadmap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="roadmap.html#short-term-2019h1">7.19.1. Short Term: 2019H1</a></li>
<li class="toctree-l3"><a class="reference internal" href="roadmap.html#medium-term-2019h2">7.19.2. Medium Term: 2019H2</a></li>
<li class="toctree-l3"><a class="reference internal" href="roadmap.html#long-term-2020-and-beyond">7.19.3. Long Term: 2020 and beyond</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proposals/index.html">8. Numba Enhancement Proposals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proposals/index.html#implemented-proposals">8.1. Implemented proposals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proposals/integer-typing.html">8.1.1. NBEP 1: Changes in integer typing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#current-semantics">8.1.1.1. Current semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#proposal-predictable-width-conserving-typing">8.1.1.2. Proposal: predictable width-conserving typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#proposal-impact">8.1.1.3. Proposal impact</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/index.html#other-proposals">8.2. Other proposals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proposals/extension-points.html">8.2.1. NBEP 2: Extension points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#high-level-api">8.2.1.1. High-level API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#typing">8.2.1.2. Typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#code-generation">8.2.1.3. Code generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/jit-classes.html">8.2.2. NBEP 3: JIT Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/jit-classes.html#introduction">8.2.2.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/jit-classes.html#proposal-jit-classes">8.2.2.2. Proposal: jit-classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/cfunc.html">8.2.3. NBEP 4: Defining C callbacks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#basic-usage">8.2.3.1. Basic usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#passing-array-data">8.2.3.2. Passing array data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#error-handling">8.2.3.3. Error handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#deferred-topics">8.2.3.4. Deferred topics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/type-inference.html">8.2.4. NBEP 5: Type Inference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#introduction">8.2.4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#numba-type-semantic">8.2.4.2. Numba Type Semantic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#type-inference">8.2.4.3. Type Inference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/typing_recursion.html">8.2.5. NBEP 6: Typing Recursion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#introduction">8.2.5.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#the-current-state">8.2.5.2. The Current State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#the-solution">8.2.5.3. The Solution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#limitations">8.2.5.4. Limitations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">9. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">10. Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-49-0dev">10.1. Version 0.49.0dev</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-48-0-jan-27-2020">10.2. Version 0.48.0 (Jan 27, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-47-0-jan-2-2020">10.3. Version 0.47.0  (Jan 2, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-46-0">10.4. Version 0.46.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-45-1">10.5. Version 0.45.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-45-0">10.6. Version 0.45.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-44-1">10.7. Version 0.44.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-44-0">10.8. Version 0.44.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-43-1">10.9. Version 0.43.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-43-0">10.10. Version 0.43.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-42-1">10.11. Version 0.42.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-42-0">10.12. Version 0.42.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-41-0">10.13. Version 0.41.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-40-1">10.14. Version 0.40.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-40-0">10.15. Version 0.40.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-39-0">10.16. Version 0.39.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-38-1">10.17. Version 0.38.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-38-0">10.18. Version 0.38.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-37-0">10.19. Version 0.37.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-36-2">10.20. Version 0.36.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-36-1">10.21. Version 0.36.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-35-0">10.22. Version 0.35.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-34-0">10.23. Version 0.34.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-33-0">10.24. Version 0.33.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-32-0">10.25. Version 0.32.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-31-0">10.26. Version 0.31.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-30-1">10.27. Version 0.30.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-30-0">10.28. Version 0.30.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-29-0">10.29. Version 0.29.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-28-1">10.30. Version 0.28.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-28-0">10.31. Version 0.28.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-27-0">10.32. Version 0.27.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-26-0">10.33. Version 0.26.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-25-0">10.34. Version 0.25.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-24-0">10.35. Version 0.24.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-23-1">10.36. Version 0.23.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-23-0">10.37. Version 0.23.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-22-1">10.38. Version 0.22.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-22-0">10.39. Version 0.22.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-21-0">10.40. Version 0.21.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-20-0">10.41. Version 0.20.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-2">10.42. Version 0.19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-1">10.43. Version 0.19.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-0">10.44. Version 0.19.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-18-2">10.45. Version 0.18.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-18-1">10.46. Version 0.18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-17-0">10.47. Version 0.17.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-16-0">10.48. Version 0.16.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-15-1">10.49. Version 0.15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-15">10.50. Version 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-14">10.51. Version 0.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-4">10.52. Version 0.13.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-3">10.53. Version 0.13.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-2">10.54. Version 0.13.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-1">10.55. Version 0.13.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13">10.56. Version 0.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12-2">10.57. Version 0.12.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12-1">10.58. Version 0.12.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12">10.59. Version 0.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-11">10.60. Version 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-10">10.61. Version 0.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-9">10.62. Version 0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-8">10.63. Version 0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7-2">10.64. Version 0.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7-1">10.65. Version 0.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7">10.66. Version 0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-6-1">10.67. Version 0.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-6">10.68. Version 0.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-5">10.69. Version 0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-4">10.70. Version 0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-3-2">10.71. Version 0.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-3">10.72. Version 0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-2">10.73. Version 0.2</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Numba</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">7. Developer Manual</a> &raquo;</li>
        
      <li>7.7. Using the Numba Rewrite Pass for Fun and Optimization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/rewrites.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-numba-rewrite-pass-for-fun-and-optimization">
<h1>7.7. Using the Numba Rewrite Pass for Fun and Optimization<a class="headerlink" href="#using-the-numba-rewrite-pass-for-fun-and-optimization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>7.7.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This section introduces intermediate representation (IR) rewrites, and
how they can be used to implement optimizations.</p>
<p>As discussed earlier in “<a class="reference internal" href="architecture.html#rewrite-typed-ir"><span class="std std-ref">Stage 6a: Rewrite typed IR</span></a>”, rewriting the Numba
IR allows us to perform optimizations that would be much more
difficult to perform at the lower LLVM level.  Similar to the Numba
type and lowering subsystems, the rewrite subsystem is user
extensible.  This extensibility affords Numba the possibility of
supporting a wide variety of domain-specific optimizations (DSO’s).</p>
<p>The remaining subsections detail the mechanics of implementing a
rewrite, registering a rewrite with the rewrite registry, and provide
examples of adding new rewrites, as well as internals of the array
expression optimization pass.  We conclude by reviewing some use cases
exposed in the examples, as well as reviewing any points where
developers should take care.</p>
</div>
<div class="section" id="rewriting-passes">
<h2>7.7.2. Rewriting Passes<a class="headerlink" href="#rewriting-passes" title="Permalink to this headline">¶</a></h2>
<p>Rewriting passes have a simple <a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> and
<a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> interface.  The division between matching and
rewriting follows how one would define a term rewrite in a declarative
domain-specific languages (DSL’s).  In such DSL’s, one may write a
rewrite as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">match</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="n">replacement</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;match&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;replacement&gt;</span></code> symbols represent IR term
expressions, where the left-hand side presents a pattern to match, and
the right-hand side an IR term constructor to build upon matching.
Whenever the rewrite matches an IR pattern, any free variables in the
left-hand side are bound within a custom environment.  When applied,
the rewrite uses the pattern matching environment to bind any free
variables in the right-hand side.</p>
<p>As Python is not commonly used in a declarative capacity, Numba uses
object state to handle the transfer of information between the
matching and application steps.</p>
<div class="section" id="the-rewrite-base-class">
<h3>7.7.2.1. The <a class="reference internal" href="#Rewrite" title="Rewrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a> Base Class<a class="headerlink" href="#the-rewrite-base-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Rewrite">
<em class="property">class </em><code class="sig-name descname">Rewrite</code><a class="headerlink" href="#Rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Rewrite" title="Rewrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a> class simply defines an abstract base class
for Numba rewrites.  Developers should define rewrites as
subclasses of this base type, overloading the
<a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> and <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> methods.</p>
<dl class="attribute">
<dt id="Rewrite.pipeline">
<code class="sig-name descname">pipeline</code><a class="headerlink" href="#Rewrite.pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>The pipeline attribute contains the
<code class="xref py py-class docutils literal notranslate"><span class="pre">numba.compiler.Pipeline</span></code> instance that is currently
compiling the function under consideration for rewriting.</p>
</dd></dl>

<dl class="method">
<dt id="Rewrite.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">pipeline</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kws</em><span class="sig-paren">)</span><a class="headerlink" href="#Rewrite.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The base constructor for rewrites simply stashes its arguments
into attributes of the same name.  Unless being used in
debugging or testing, rewrites should only be constructed by
the <code class="xref py py-class docutils literal notranslate"><span class="pre">RewriteRegistry</span></code> in the
<code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteRegistry.apply()</span></code> method, and the construction
interface should remain stable (though the pipeline will
commonly contain just about everything there is to know).</p>
</dd></dl>

<dl class="method">
<dt id="Rewrite.match">
<code class="sig-name descname">match</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">block</em>, <em class="sig-param">typemap</em>, <em class="sig-param">callmap</em><span class="sig-paren">)</span><a class="headerlink" href="#Rewrite.match" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> method takes four arguments other
than <em>self</em>:</p>
<ul class="simple">
<li><p><em>func_ir</em>: This is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.FunctionIR</span></code> for the
function being rewritten.</p></li>
<li><p><em>block</em>: This is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.Block</span></code>.  The
matching method should iterate over the instructions contained
in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">numba.ir.Block.body</span></code> member.</p></li>
<li><p><em>typemap</em>: This is a Python <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> instance mapping
from symbol names in the IR, represented as strings, to Numba
types.</p></li>
<li><p><em>callmap</em>: This is another <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> instance mapping from
calls, represented as <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.Expr</span></code> instances, to
their corresponding call site type signatures, represented as
a <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.typing.templates.Signature</span></code> instance.</p></li>
</ul>
<p>The <a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> method should return a <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>
result.  A <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> result should indicate that one or more
matches were found, and the <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> method will
return a new replacement <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.Block</span></code> instance.  A
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> result should indicate that no matches were found, and
subsequent calls to <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> will return undefined
or invalid results.</p>
</dd></dl>

<dl class="method">
<dt id="Rewrite.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#Rewrite.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> method should only be invoked
following a successful call to <a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a>.  This
method takes no additional parameters other than <em>self</em>, and
should return a replacement <code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.Block</span></code> instance.</p>
<p>As mentioned above, the behavior of calling
<a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> is undefined unless
<a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> has already been called and returned
<a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="subclassing-rewrite">
<h3>7.7.2.2. Subclassing <a class="reference internal" href="#Rewrite" title="Rewrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a><a class="headerlink" href="#subclassing-rewrite" title="Permalink to this headline">¶</a></h3>
<p>Before going into the expectations for the overloaded methods any
<a class="reference internal" href="#Rewrite" title="Rewrite"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a> subclass must have, let’s step back a minute to
review what is taking place here.  By providing an extensible
compiler, Numba opens itself to user-defined code generators which may
be incomplete, or worse, incorrect.  When a code generator goes awry,
it can cause abnormal program behavior or early termination.
User-defined rewrites add a new level of complexity because they must
not only generate correct code, but the code they generate should
ensure that the compiler does not get stuck in a match/apply loop.
Non-termination by the compiler will directly lead to non-termination
of user function calls.</p>
<p>There are several ways to help ensure that a rewrite terminates:</p>
<ul class="simple">
<li><p><em>Typing</em>: A rewrite should generally attempt to decompose composite
types, and avoid composing new types.  If the rewrite is matching a
specific type, changing expression types to a lower-level type will
ensure they will no long match after the rewrite is applied.</p></li>
<li><p><em>Special instructions</em>: A rewrite may synthesize custom operators or
use special functions in the target IR.  This technique again
generates code that is no longer within the domain of the original
match, and the rewrite will terminate.</p></li>
</ul>
<p>In the “<a class="reference internal" href="#case-study-array-expressions"><span class="std std-ref">Case study: Array Expressions</span></a>” subsection, below, we’ll
see how the array expression rewriter uses both of these techniques.</p>
</div>
<div class="section" id="overloading-rewrite-match">
<h3>7.7.2.3. Overloading <a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.match()</span></code></a><a class="headerlink" href="#overloading-rewrite-match" title="Permalink to this headline">¶</a></h3>
<p>Every rewrite developer should seek to have their implementation of
<a class="reference internal" href="#Rewrite.match" title="Rewrite.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">match()</span></code></a> return a <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> value as quickly as
possible.  Numba is a just-in-time compiler, and adding compilation
time ultimately adds to the user’s run time.  When a rewrite returns
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> for a given block, the registry will no longer process that
block with that rewrite, and the compiler is that much closer to
proceeding to lowering.</p>
<p>This need for timeliness has to be balanced against collecting the
necessary information to make a match for a rewrite.  Rewrite
developers should be comfortable adding dynamic attributes to their
subclasses, and then having these new attributes guide construction of
the replacement basic block.</p>
</div>
<div class="section" id="overloading-rewrite-apply">
<h3>7.7.2.4. Overloading <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.apply()</span></code></a><a class="headerlink" href="#overloading-rewrite-apply" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> method should return a replacement
<code class="xref py py-class docutils literal notranslate"><span class="pre">numba.ir.Block</span></code> instance to replace the basic block that
contained a match for the rewrite.  As mentioned above, the IR built
by <a class="reference internal" href="#Rewrite.apply" title="Rewrite.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code></a> methods should preserve the semantics of the
user’s code, but also seek to avoid generating another match for the
same rewrite or set of rewrites.</p>
</div>
</div>
<div class="section" id="the-rewrite-registry">
<h2>7.7.3. The Rewrite Registry<a class="headerlink" href="#the-rewrite-registry" title="Permalink to this headline">¶</a></h2>
<p>When you want to include a rewrite in the rewrite pass, you should
register it with the rewrite registry.  The <code class="xref py py-mod docutils literal notranslate"><span class="pre">numba.rewrites</span></code>
module provides both the abstract base class and a class decorator for
hooking into the Numba rewrite subsystem.  The following illustrates a
stub definition of a new rewrite:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">rewrites</span>

<span class="nd">@rewrites</span><span class="o">.</span><span class="n">register_rewrite</span>
<span class="k">class</span> <span class="nc">MyRewrite</span><span class="p">(</span><span class="n">rewrites</span><span class="o">.</span><span class="n">Rewrite</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">typemap</span><span class="p">,</span> <span class="n">calltypes</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;FIXME&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;FIXME&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Developers should note that using the class decorator as shown above
will register a rewrite at import time.  It is the developer’s
responsibility to ensure their extensions are loaded before
compilation starts.</p>
</div>
<div class="section" id="case-study-array-expressions">
<span id="id1"></span><h2>7.7.4. Case study: Array Expressions<a class="headerlink" href="#case-study-array-expressions" title="Permalink to this headline">¶</a></h2>
<p>This subsection looks at the array expression rewriter in more depth.
The array expression rewriter, and most of its support functionality,
are found in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">numba.npyufunc.array_exprs</span></code> module.  The
rewriting pass itself is implemented in the <code class="xref py py-class docutils literal notranslate"><span class="pre">RewriteArrayExprs</span></code>
class.  In addition to the rewriter, the
<code class="xref py py-mod docutils literal notranslate"><span class="pre">array_exprs</span></code> module includes a function for
lowering array expressions,
<code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code>.  The overall
optimization process is as follows:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code>: The rewrite pass looks for two or
more array operations that form an array expression.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code>: Once an array expression is found,
the rewriter replaces the individual array operations with a new
kind of IR expression, the <code class="docutils literal notranslate"><span class="pre">arrayexpr</span></code>.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">numba.npyufunc.array_exprs._lower_array_expr()</span></code>: During
lowering, the code generator calls
<code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code> whenever it
finds an <code class="docutils literal notranslate"><span class="pre">arrayexpr</span></code> IR expression.</p></li>
</ul>
<p>More details on each step of the optimization are given below.</p>
<div class="section" id="the-rewritearrayexprs-match-method">
<h3>7.7.4.1. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code> method<a class="headerlink" href="#the-rewritearrayexprs-match-method" title="Permalink to this headline">¶</a></h3>
<p>The array expression optimization pass starts by looking for array
operations, including calls to supported <code class="xref py py-class docutils literal notranslate"><span class="pre">ufunc</span></code>’s and
user-defined <a class="reference internal" href="../reference/jit-compilation.html#numba.DUFunc" title="numba.DUFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">DUFunc</span></code></a>’s.  Numba IR follows the
conventions of a static single assignment (SSA) language, meaning that
the search for array operators begins with looking for assignment
instructions.</p>
<p>When the rewriting pass calls the <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code>
method, it first checks to see if it can trivially reject the basic
block.  If the method determines the block to be a candidate for
matching, it sets up the following state variables in the rewrite
object:</p>
<ul class="simple">
<li><p><em>crnt_block</em>: The current basic block being matched.</p></li>
<li><p><em>typemap</em>: The <em>typemap</em> for the function being matched.</p></li>
<li><p><em>matches</em>: A list of variable names that reference array expressions.</p></li>
<li><p><em>array_assigns</em>: A map from assignment variable names to the actual
assignment instructions that define the given variable.</p></li>
<li><p><em>const_assigns</em>: A map from assignment variable names to the
constant valued expression that defines the constant variable.</p></li>
</ul>
<p>At this point, the match method iterates iterates over the assignment
instructions in the input basic block.  For each assignment
instruction, the matcher looks for one of two things:</p>
<ul class="simple">
<li><p>Array operations: If the right-hand side of the assignment
instruction is an expression, and the result of that expression is
an array type, the matcher checks to see if the expression is either
a known array operation, or a call to a universal function.  If an
array operator is found, the matcher stores the left-hand variable
name and the whole instruction in the <em>array_assigns</em> member.
Finally, the matcher tests to see if any operands of the array
operation have also been identified as targets of other array
operations.  If one or more operands are also targets of array
operations, then the matcher will also append the left-hand side
variable name to the <em>matches</em> member.</p></li>
<li><p>Constants: Constants (even scalars) can be operands to array
operations.  Without worrying about the constant being apart of an
array expression, the matcher stores constant names and values in
the <em>const_assigns</em> member.</p></li>
</ul>
<p>The end of the matching method simply checks for a non-empty <em>matches</em>
list, returning <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if there were one or more matches, and
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> when <em>matches</em> is empty.</p>
</div>
<div class="section" id="the-rewritearrayexprs-apply-method">
<h3>7.7.4.2. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code> method<a class="headerlink" href="#the-rewritearrayexprs-apply-method" title="Permalink to this headline">¶</a></h3>
<p>When one or matching array expressions are found by
<code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code>, the rewriting pass will call
<code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code>.  The apply method works in two
passes.  The first pass iterates over the matches found, and builds a
map from instructions in the old basic block to new instructions in
the new basic block.  The second pass iterates over the instructions
in the old basic block, copying instructions that are not changed by
the rewrite, and replacing or deleting instructions that were
identified by the first pass.</p>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs._handle_matches()</span></code> implements the first
pass of the code generation portion of the rewrite.  For each match,
this method builds a special IR expression that contains an expression
tree for the array expression.  To compute the leaves of the
expression tree, the <code class="xref py py-func docutils literal notranslate"><span class="pre">_handle_matches()</span></code> method
iterates over the operands of the identified root operation.  If the
operand is another array operation, it is translated into an
expression sub-tree.  If the operand is a constant,
<code class="xref py py-func docutils literal notranslate"><span class="pre">_handle_matches()</span></code> copies the constant value.
Otherwise, the operand is marked as being used by an array expression.
As the method builds array expression nodes, it builds a map from old
instructions to new instructions (<em>replace_map</em>), as well as sets of
variables that may have moved (<em>used_vars</em>), and variables that should
be removed altogether (<em>dead_vars</em>).  These three data structures are
returned back to the calling <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code> method.</p>
<p>The remaining part of the <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code> method
iterates over the instructions in the old basic block.  For each
instruction, this method either replaces, deletes, or duplicates that
instruction based on the results of
<code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs._handle_matches()</span></code>.  The following list
describes how the optimization handles individual instructions:</p>
<ul class="simple">
<li><p>When an instruction is an assignment,
<code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code> checks to see if it is in the
replacement instruction map.  When an assignment instruction is found
in the instruction map, <code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code> must then
check to see if the replacement instruction is also in the replacement
map.  The optimizer continues this check until it either arrives at a
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> value or an instruction that isn’t in the replacement map.
Instructions that have a replacement that is <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> are deleted.
Instructions that have a non-<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> replacement are replaced.
Assignment instructions not in the replacement map are appended to the
new basic block with no changes made.</p></li>
<li><p>When the instruction is a delete instruction, the rewrite checks to
see if it deletes a variable that may still be used by a later array
expression, or if it deletes a dead variable.  Delete instructions for
used variables are added to a map of deferred delete instructions that
<code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code> uses to move them past any uses of
that variable.  The loop copies delete instructions for non-dead
variables, and ignores delete instructions for dead variables
(effectively removing them from the basic block).</p></li>
<li><p>All other instructions are appended to the new basic block.</p></li>
</ul>
<p>Finally, the <code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code> method returns the new
basic block for lowering.</p>
</div>
<div class="section" id="the-lower-array-expr-function">
<h3>7.7.4.3. The <code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code> function<a class="headerlink" href="#the-lower-array-expr-function" title="Permalink to this headline">¶</a></h3>
<p>If we left things at just the rewrite, then the lowering stage of the
compiler would fail, complaining it doesn’t know how to lower
<code class="docutils literal notranslate"><span class="pre">arrayexpr</span></code> operations.  We start by hooking a lowering function
into the target context whenever the <code class="xref py py-class docutils literal notranslate"><span class="pre">RewriteArrayExprs</span></code> class
is instantiated by the compiler.  This hook causes the lowering pass to
call <code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code> whenever it
encounters an <code class="docutils literal notranslate"><span class="pre">arrayexr</span></code> operator.</p>
<p>This function has two steps:</p>
<ul class="simple">
<li><p>Synthesize a Python function that implements the array expression:
This new Python function essentially behaves like a Numpy
<code class="xref py py-class docutils literal notranslate"><span class="pre">ufunc</span></code>, returning the result of the expression on
scalar values in the broadcasted array arguments.  The lowering
function accomplishes this by translating from the array expression
tree into a Python AST.</p></li>
<li><p>Compile the synthetic Python function into a kernel:  At this point,
the lowering function relies on existing code for lowering ufunc and
DUFunc kernels, calling
<code class="xref py py-func docutils literal notranslate"><span class="pre">numba.targets.numpyimpl.numpy_ufunc_kernel()</span></code> after defining
how to lower calls to the synthetic function.</p></li>
</ul>
<p>The end result is similar to loop lifting in Numba’s object mode.</p>
</div>
</div>
<div class="section" id="conclusions-and-caveats">
<h2>7.7.5. Conclusions and Caveats<a class="headerlink" href="#conclusions-and-caveats" title="Permalink to this headline">¶</a></h2>
<p>We have seen how to implement rewrites in Numba, starting with the
interface, and ending with an actual optimization.  The key points of
this section are:</p>
<ul class="simple">
<li><p>When writing a good plug-in, the matcher should try to get a
go/no-go result as soon as possible.</p></li>
<li><p>The rewrite application portion can be more computationally
expensive, but should still generate code that won’t cause infinite
loops in the compiler.</p></li>
<li><p>We use object state to communicate any results of matching to the
rewrite application pass.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="live_variable_analysis.html" class="btn btn-neutral float-right" title="7.8. Live Variable Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="numba-runtime.html" class="btn btn-neutral float-left" title="7.6. Notes on Numba Runtime" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2020, Anaconda, Inc. and others

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>