

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.17. Troubleshooting and tips &mdash; Numba 0.49.0dev0+848.g3bc439ad5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/numba-blue-icon-rgb.svg"/>
  
  
  
    <link rel="canonical" href="http://numba.pydata.org/numba-doc/latest/index.htmluser/troubleshoot.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.18. Frequently Asked Questions" href="faq.html" />
    <link rel="prev" title="1.16. Command line interface" href="cli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00A3E0" >
          

          
            <a href="../index.html" class="icon icon-home"> Numba
          

          
            
            <img src="../_static/numba-white-icon-rgb.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.49
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="5minguide.html">1.1. A ~5 minute guide to Numba</a><ul>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#how-do-i-get-it">1.1.1. How do I get it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#will-numba-work-for-my-code">1.1.2. Will Numba work for my code?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#what-is-nopython-mode">1.1.3. What is <code class="docutils literal notranslate"><span class="pre">nopython</span></code> mode?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#how-to-measure-the-performance-of-numba">1.1.4. How to measure the performance of Numba?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#how-fast-is-it">1.1.5. How fast is it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#how-does-numba-work">1.1.6. How does Numba work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="5minguide.html#other-things-of-interest">1.1.7. Other things of interest:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="5minguide.html#gpu-targets">1.1.7.1. GPU targets:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="overview.html">1.2. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html">1.3. Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installing.html#compatibility">1.3.1. Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#installing-using-conda-on-x86-x86-64-power-platforms">1.3.2. Installing using conda on x86/x86_64/POWER Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#installing-using-pip-on-x86-x86-64-platforms">1.3.3. Installing using pip on x86/x86_64 Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#enabling-amd-rocm-gpu-support">1.3.4. Enabling AMD ROCm GPU Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#installing-on-linux-armv7-platforms">1.3.5. Installing on Linux ARMv7 Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#installing-on-linux-armv8-aarch64-platforms">1.3.6. Installing on Linux ARMv8 (AArch64) Platforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#installing-from-source">1.3.7. Installing from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#dependency-list">1.3.8. Dependency List</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing.html#checking-your-installation">1.3.9. Checking your installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jit.html">1.4. Compiling Python code with <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="jit.html#basic-usage">1.4.1. Basic usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="jit.html#lazy-compilation">1.4.1.1. Lazy compilation</a></li>
<li class="toctree-l4"><a class="reference internal" href="jit.html#eager-compilation">1.4.1.2. Eager compilation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jit.html#calling-and-inlining-other-functions">1.4.2. Calling and inlining other functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="jit.html#signature-specifications">1.4.3. Signature specifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="jit.html#compilation-options">1.4.4. Compilation options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="jit.html#nopython">1.4.4.1. <code class="docutils literal notranslate"><span class="pre">nopython</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="jit.html#nogil">1.4.4.2. <code class="docutils literal notranslate"><span class="pre">nogil</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="jit.html#cache">1.4.4.3. <code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="jit.html#parallel">1.4.4.4. <code class="docutils literal notranslate"><span class="pre">parallel</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="generated-jit.html">1.5. Flexible specializations with <code class="docutils literal notranslate"><span class="pre">&#64;generated_jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated-jit.html#example">1.5.1. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated-jit.html#compilation-options">1.5.2. Compilation options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vectorize.html">1.6. Creating NumPy universal functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vectorize.html#the-vectorize-decorator">1.6.1. The <code class="docutils literal notranslate"><span class="pre">&#64;vectorize</span></code> decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="vectorize.html#the-guvectorize-decorator">1.6.2. The <code class="docutils literal notranslate"><span class="pre">&#64;guvectorize</span></code> decorator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vectorize.html#overwriting-input-values">1.6.2.1. Overwriting input values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="vectorize.html#dynamic-universal-functions">1.6.3. Dynamic universal functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jitclass.html">1.7. Compiling Python classes with <code class="docutils literal notranslate"><span class="pre">&#64;jitclass</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="jitclass.html#basic-usage">1.7.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="jitclass.html#specifying-numba-typed-containers-as-class-members">1.7.2. Specifying <code class="docutils literal notranslate"><span class="pre">numba.typed</span></code> containers as class members</a></li>
<li class="toctree-l3"><a class="reference internal" href="jitclass.html#support-operations">1.7.3. Support operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="jitclass.html#limitations">1.7.4. Limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="jitclass.html#the-decorator-jitclass">1.7.5. The decorator: <code class="docutils literal notranslate"><span class="pre">&#64;jitclass</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cfunc.html">1.8. Creating C callbacks with <code class="docutils literal notranslate"><span class="pre">&#64;cfunc</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#basic-usage">1.8.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#example">1.8.2. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#dealing-with-pointers-and-array-memory">1.8.3. Dealing with pointers and array memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#handling-c-structures">1.8.4. Handling C structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cfunc.html#with-cffi">1.8.4.1. With CFFI</a></li>
<li class="toctree-l4"><a class="reference internal" href="cfunc.html#with-numba-types-record-make-c-struct">1.8.4.2. With <code class="docutils literal notranslate"><span class="pre">numba.types.Record.make_c_struct</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cfunc.html#full-example">1.8.4.3. Full example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#signature-specification">1.8.5. Signature specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="cfunc.html#compilation-options">1.8.6. Compilation options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pycc.html">1.9. Compiling code ahead of time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pycc.html#overview">1.9.1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pycc.html#benefits">1.9.1.1. Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="pycc.html#limitations">1.9.1.2. Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pycc.html#usage">1.9.2. Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pycc.html#standalone-example">1.9.2.1. Standalone example</a></li>
<li class="toctree-l4"><a class="reference internal" href="pycc.html#distutils-integration">1.9.2.2. Distutils integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="pycc.html#signature-syntax">1.9.2.3. Signature syntax</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html">1.10. Automatic parallelization with <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="parallel.html#supported-operations">1.10.1. Supported Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="parallel.html#explicit-parallel-loops">1.10.2. Explicit Parallel Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="parallel.html#examples">1.10.3. Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="parallel.html#diagnostics">1.10.4. Diagnostics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="parallel.html#the-parallel-diagnostics-report-sections">1.10.4.1. The parallel diagnostics report sections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stencil.html">1.11. Using the <code class="docutils literal notranslate"><span class="pre">&#64;stencil</span></code> decorator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#basic-usage">1.11.1. Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#stencil-parameters">1.11.2. Stencil Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#kernel-shape-inference-and-border-handling">1.11.3. Kernel shape inference and border handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#stencil-decorator-options">1.11.4. Stencil decorator options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#neighborhood">1.11.4.1. <code class="docutils literal notranslate"><span class="pre">neighborhood</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#func-or-mode">1.11.4.2. <code class="docutils literal notranslate"><span class="pre">func_or_mode</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#cval">1.11.4.3. <code class="docutils literal notranslate"><span class="pre">cval</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#standard-indexing">1.11.4.4. <code class="docutils literal notranslate"><span class="pre">standard_indexing</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#stencilfunc">1.11.5. <code class="docutils literal notranslate"><span class="pre">StencilFunc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="stencil.html#stencil-invocation-options">1.11.6. Stencil invocation options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="stencil.html#out">1.11.6.1. <code class="docutils literal notranslate"><span class="pre">out</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="withobjmode.html">1.12. Callback into the Python Interpreter from within JIT’ed code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="withobjmode.html#the-objmode-context-manager">1.12.1. The <code class="docutils literal notranslate"><span class="pre">objmode</span></code> context-manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jit-module.html">1.13. Automatic module jitting with <code class="docutils literal notranslate"><span class="pre">jit_module</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="jit-module.html#example-usage">1.13.1. Example usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="jit-module.html#api">1.13.2. API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="performance-tips.html">1.14. Performance Tips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#no-python-mode-vs-object-mode">1.14.1. No Python mode vs Object mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#loops">1.14.2. Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#fastmath">1.14.3. Fastmath</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#parallel-true">1.14.4. Parallel=True</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#intel-svml">1.14.5. Intel SVML</a></li>
<li class="toctree-l3"><a class="reference internal" href="performance-tips.html#linear-algebra">1.14.6. Linear algebra</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="threading-layer.html">1.15. The Threading Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="threading-layer.html#which-threading-layers-are-available">1.15.1. Which threading layers are available?</a></li>
<li class="toctree-l3"><a class="reference internal" href="threading-layer.html#setting-the-threading-layer">1.15.2. Setting the threading layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="threading-layer.html#selecting-a-threading-layer-for-safe-parallel-execution">1.15.2.1. Selecting a threading layer for safe parallel execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="threading-layer.html#selecting-a-named-threading-layer">1.15.2.2. Selecting a named threading layer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="threading-layer.html#extra-notes">1.15.3. Extra notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="threading-layer.html#setting-the-number-of-threads">1.15.4. Setting the Number of Threads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="threading-layer.html#example-of-limiting-the-number-of-threads">1.15.4.1. Example of Limiting the Number of Threads</a></li>
<li class="toctree-l4"><a class="reference internal" href="threading-layer.html#api-reference">1.15.4.2. API Reference</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">1.16. Command line interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli.html#usage">1.16.1. Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#help">1.16.2. Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#system-information">1.16.3. System information</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#debugging">1.16.4. Debugging</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.17. Troubleshooting and tips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-to-compile">1.17.1. What to compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#my-code-doesn-t-compile">1.17.2. My code doesn’t compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#my-code-has-a-type-unification-problem">1.17.3. My code has a type unification problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#my-code-has-an-untyped-list-problem">1.17.4. My code has an untyped list problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-compiled-code-is-too-slow">1.17.5. The compiled code is too slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disabling-jit-compilation">1.17.6. Disabling JIT compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-jit-compiled-code-with-gdb">1.17.7. Debugging JIT compiled code with GDB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-debug-usage">1.17.7.1. Example debug usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#globally-override-debug-setting">1.17.7.2. Globally override debug setting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-numba-s-direct-gdb-bindings-in-nopython-mode">1.17.8. Using Numba’s direct <code class="docutils literal notranslate"><span class="pre">gdb</span></code> bindings in <code class="docutils literal notranslate"><span class="pre">nopython</span></code>  mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#set-up">1.17.8.1. Set up</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-gdb-support">1.17.8.2. Basic <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-with-gdb-enabled">1.17.8.3. Running with <code class="docutils literal notranslate"><span class="pre">gdb</span></code> enabled</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-breakpoints-to-code">1.17.8.4. Adding breakpoints to code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debugging-in-parallel-regions">1.17.8.5. Debugging in parallel regions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-gdb-command-language">1.17.8.6. Using the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> command language</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-does-the-gdb-binding-work">1.17.8.7. How does the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> binding work?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#debugging-cuda-python-code">1.17.9. Debugging CUDA Python code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-the-simulator">1.17.9.1. Using the simulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#debug-info">1.17.9.2. Debug Info</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">1.18. Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#programming">1.18.1. Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="faq.html#can-i-pass-a-function-as-an-argument-to-a-jitted-function">1.18.1.1. Can I pass a function as an argument to a jitted function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#numba-doesn-t-seem-to-care-when-i-modify-a-global-variable">1.18.1.2. Numba doesn’t seem to care when I modify a global variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#can-i-debug-a-jitted-function">1.18.1.3. Can I debug a jitted function?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#how-can-i-create-a-fortran-ordered-array">1.18.1.4. How can I create a Fortran-ordered array?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#how-can-i-increase-integer-width">1.18.1.5. How can I increase integer width?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#how-can-i-tell-if-parallel-true-worked">1.18.1.6. How can I tell if <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code> worked?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#performance">1.18.2. Performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="faq.html#does-numba-inline-functions">1.18.2.1. Does Numba inline functions?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#does-numba-vectorize-array-computations-simd">1.18.2.2. Does Numba vectorize array computations (SIMD)?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#why-my-loop-is-not-vectorized">1.18.2.3. Why my loop is not vectorized?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#does-numba-automatically-parallelize-code">1.18.2.4. Does Numba automatically parallelize code?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#can-numba-speed-up-short-running-functions">1.18.2.5. Can Numba speed up short-running functions?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#there-is-a-delay-when-jit-compiling-a-complicated-function-how-can-i-improve-it">1.18.2.6. There is a delay when JIT-compiling a complicated function, how can I improve it?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#gpu-programming">1.18.3. GPU Programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="faq.html#how-do-i-work-around-the-cuda-intialized-before-forking-error">1.18.3.1. How do I work around the <code class="docutils literal notranslate"><span class="pre">CUDA</span> <span class="pre">intialized</span> <span class="pre">before</span> <span class="pre">forking</span></code> error?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#integration-with-other-utilities">1.18.4. Integration with other utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="faq.html#can-i-freeze-an-application-which-uses-numba">1.18.4.1. Can I “freeze” an application which uses Numba?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#i-get-errors-when-running-a-script-twice-under-spyder">1.18.4.2. I get errors when running a script twice under Spyder</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#why-does-numba-complain-about-the-current-locale">1.18.4.3. Why does Numba complain about the current locale?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#miscellaneous">1.18.5. Miscellaneous</a><ul>
<li class="toctree-l4"><a class="reference internal" href="faq.html#where-does-the-project-name-numba-come-from">1.18.5.1. Where does the project name “Numba” come from?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#how-do-i-reference-cite-acknowledge-numba-in-other-work">1.18.5.2. How do I reference/cite/acknowledge Numba in other work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="faq.html#other-related-papers">1.18.5.3. Other related papers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">1.19. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.html#mandelbrot">1.19.1. Mandelbrot</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html#moving-average">1.19.2. Moving average</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.html#multi-threading">1.19.3. Multi-threading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="talks.html">1.20. Talks and Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="talks.html#talks-on-numba">1.20.1. Talks on Numba</a></li>
<li class="toctree-l3"><a class="reference internal" href="talks.html#talks-on-applications-of-numba">1.20.2. Talks on Applications of Numba</a></li>
<li class="toctree-l3"><a class="reference internal" href="talks.html#tutorials">1.20.3. Tutorials</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">2. Reference Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/types.html">2.1. Types and signatures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#rationale">2.1.1. Rationale</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#signatures">2.1.2. Signatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#basic-types">2.1.3. Basic types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#numbers">2.1.3.1. Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#arrays">2.1.3.2. Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#miscellaneous-types">2.1.3.3. Miscellaneous Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/types.html#advanced-types">2.1.4. Advanced types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#inference">2.1.4.1. Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#numpy-scalars">2.1.4.2. Numpy scalars</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#id1">2.1.4.3. Arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/types.html#optional-types">2.1.4.4. Optional types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/jit-compilation.html">2.2. Just-in-Time compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#jit-functions">2.2.1. JIT functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#generated-jit-functions">2.2.2. Generated JIT functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#dispatcher-objects">2.2.3. Dispatcher objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#vectorized-functions-ufuncs-and-dufuncs">2.2.4. Vectorized functions (ufuncs and DUFuncs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/jit-compilation.html#c-callbacks">2.2.5. C callbacks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/aot-compilation.html">2.3. Ahead-of-Time compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/utils.html">2.4. Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/utils.html#dealing-with-pointers">2.4.1. Dealing with pointers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/envvars.html">2.5. Environment variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#jit-flags">2.5.1. Jit flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#debugging">2.5.2. Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#compilation-options">2.5.3. Compilation options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#caching-options">2.5.4. Caching options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#gpu-support">2.5.5. GPU support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/envvars.html#threading-control">2.5.6. Threading Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pysupported.html">2.6. Supported Python features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#language">2.6.1. Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#constructs">2.6.1.1. Constructs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#functions">2.6.1.2. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#generators">2.6.1.3. Generators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#exception-handling">2.6.1.4. Exception handling</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#built-in-types">2.6.2. Built-in types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#int-bool">2.6.2.1. int, bool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#float-complex">2.6.2.2. float, complex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#str">2.6.2.3. str</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#tuple">2.6.2.4. tuple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#homogeneous-tuples">2.6.2.5. homogeneous tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#heterogeneous-tuples">2.6.2.6. heterogeneous tuples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#list">2.6.2.7. list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#set">2.6.2.8. set</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#none">2.6.2.9. None</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#bytes-bytearray-memoryview">2.6.2.10. bytes, bytearray, memoryview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#built-in-functions">2.6.3. Built-in functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#hashing">2.6.3.1. Hashing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#standard-library-modules">2.6.4. Standard library modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#array">2.6.4.1. <code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#cmath">2.6.4.2. <code class="docutils literal notranslate"><span class="pre">cmath</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#collections">2.6.4.3. <code class="docutils literal notranslate"><span class="pre">collections</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#ctypes">2.6.4.4. <code class="docutils literal notranslate"><span class="pre">ctypes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#enum">2.6.4.5. <code class="docutils literal notranslate"><span class="pre">enum</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#math">2.6.4.6. <code class="docutils literal notranslate"><span class="pre">math</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#operator">2.6.4.7. <code class="docutils literal notranslate"><span class="pre">operator</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#functools">2.6.4.8. <code class="docutils literal notranslate"><span class="pre">functools</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#random">2.6.4.9. <code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#heapq">2.6.4.10. <code class="docutils literal notranslate"><span class="pre">heapq</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysupported.html#third-party-modules">2.6.5. Third-party modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/pysupported.html#cffi">2.6.5.1. <code class="docutils literal notranslate"><span class="pre">cffi</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/numpysupported.html">2.7. Supported NumPy features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#scalar-types">2.7.1. Scalar types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#array-types">2.7.2. Array types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#array-access">2.7.2.1. Array access</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#attributes">2.7.2.2. Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#calculation">2.7.2.3. Calculation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#other-methods">2.7.2.4. Other methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#functions">2.7.3. Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#linear-algebra">2.7.3.1. Linear algebra</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#reductions">2.7.3.2. Reductions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#other-functions">2.7.3.3. Other functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#literal-arrays">2.7.3.4. Literal arrays</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#modules">2.7.4. Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#random">2.7.4.1. <code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#stride-tricks">2.7.4.2. <code class="docutils literal notranslate"><span class="pre">stride_tricks</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/numpysupported.html#standard-ufuncs">2.7.5. Standard ufuncs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#limitations">2.7.5.1. Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#math-operations">2.7.5.2. Math operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#trigonometric-functions">2.7.5.3. Trigonometric functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#bit-twiddling-functions">2.7.5.4. Bit-twiddling functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#comparison-functions">2.7.5.5. Comparison functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/numpysupported.html#floating-functions">2.7.5.6. Floating functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pysemantics.html">2.8. Deviations from Python Semantics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#exceptions-and-memory-allocation">2.8.1. Exceptions and Memory Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#integer-width">2.8.2. Integer width</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#boolean-inversion">2.8.3. Boolean inversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/pysemantics.html#global-and-closure-variables">2.8.4. Global and closure variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/fpsemantics.html">2.9. Floating-point pitfalls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/fpsemantics.html#precision-and-accuracy">2.9.1. Precision and accuracy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#math-library-implementations">2.9.1.1. Math library implementations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#linear-algebra">2.9.1.2. Linear algebra</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/fpsemantics.html#mixed-types-operations">2.9.1.3. Mixed-types operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/fpsemantics.html#warnings-and-errors">2.9.2. Warnings and errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/python27-eol.html">2.10. Python 2.7 End of Life Plan</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/python27-eol.html#timeline">2.10.1. Timeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/deprecation.html">2.11. Deprecation Notices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#suppressing-deprecation-warnings">2.11.1. Suppressing Deprecation warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#deprecation-of-reflection-for-list-and-set-types">2.11.2. Deprecation of reflection for List and Set types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#reason-for-deprecation">2.11.2.1. Reason for deprecation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#example-s-of-the-impact">2.11.2.2. Example(s) of the impact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#schedule">2.11.2.3. Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#recommendations">2.11.2.4. Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#expected-replacement">2.11.2.5. Expected Replacement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit">2.11.3. Deprecation of <span class="xref std std-term">object mode</span> <cite>fall-back</cite> behaviour when using <code class="docutils literal notranslate"><span class="pre">&#64;jit</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id1">2.11.3.1. Reason for deprecation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id2">2.11.3.2. Example(s) of the impact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id3">2.11.3.3. Schedule</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/deprecation.html#id4">2.11.3.4. Recommendations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cuda/index.html">3. Numba for CUDA GPUs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cuda/overview.html">3.1. Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#terminology">3.1.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#programming-model">3.1.2. Programming model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#requirements">3.1.3. Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/overview.html#supported-gpus">3.1.3.1. Supported GPUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/overview.html#software">3.1.3.2. Software</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/overview.html#missing-cuda-features">3.1.4. Missing CUDA Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/kernels.html">3.2. Writing CUDA Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#introduction">3.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#kernel-declaration">3.2.2. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#kernel-invocation">3.2.3. Kernel invocation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#choosing-the-block-size">3.2.3.1. Choosing the block size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#multi-dimensional-blocks-and-grids">3.2.3.2. Multi-dimensional blocks and grids</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/kernels.html#thread-positioning">3.2.4. Thread positioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#absolute-positions">3.2.4.1. Absolute positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/kernels.html#further-reading">3.2.4.2. Further Reading</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/memory.html">3.3. Memory management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#data-transfer">3.3.1. Data transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/memory.html#device-arrays">3.3.1.1. Device arrays</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#pinned-memory">3.3.2. Pinned memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#streams">3.3.3. Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#shared-memory-and-thread-synchronization">3.3.4. Shared memory and thread synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#local-memory">3.3.5. Local memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#constant-memory">3.3.6. Constant memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/memory.html#deallocation-behavior">3.3.7. Deallocation Behavior</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-functions.html">3.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/cudapysupported.html">3.5. Supported Python features in CUDA Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#language">3.5.1. Language</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#execution-model">3.5.1.1. Execution Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#constructs">3.5.1.2. Constructs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#built-in-types">3.5.2. Built-in types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#built-in-functions">3.5.3. Built-in functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#standard-library-modules">3.5.4. Standard library modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#cmath">3.5.4.1. <code class="docutils literal notranslate"><span class="pre">cmath</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#math">3.5.4.2. <code class="docutils literal notranslate"><span class="pre">math</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cudapysupported.html#operator">3.5.4.3. <code class="docutils literal notranslate"><span class="pre">operator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cudapysupported.html#numpy-support">3.5.5. Numpy support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/intrinsics.html">3.6. Supported Atomic Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/intrinsics.html#example">3.6.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/random.html">3.7. Random Number Generation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/random.html#example">3.7.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-management.html">3.8. Device management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/device-management.html#device-selection">3.8.1. Device Selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/device-management.html#the-device-list">3.9. The Device List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/examples.html">3.10. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/examples.html#matrix-multiplication">3.10.1. Matrix multiplication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/simulator.html">3.11. Debugging CUDA Python with the the CUDA Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/simulator.html#using-the-simulator">3.11.1. Using the simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/simulator.html#supported-features">3.11.2. Supported features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/reduction.html">3.12. GPU Reduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/reduction.html#reduce">3.12.1. <code class="docutils literal notranslate"><span class="pre">&#64;reduce</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/reduction.html#class-reduce">3.12.2. class Reduce</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/ufunc.html">3.13. CUDA Ufuncs and Generalized Ufuncs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#example-basic-example">3.13.1. Example: Basic Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#example-calling-device-functions">3.13.2. Example: Calling Device Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ufunc.html#generalized-cuda-ufuncs">3.13.3. Generalized CUDA ufuncs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/ipc.html">3.14. Sharing CUDA Memory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/ipc.html#sharing-between-process">3.14.1. Sharing between process</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/ipc.html#export-device-array-to-another-process">3.14.1.1. Export device array to another process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/ipc.html#import-ipc-memory-from-another-process">3.14.1.2. Import IPC memory from another process</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/cuda_array_interface.html">3.15. CUDA Array Interface (Version 2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/cuda_array_interface.html#python-interface-specification">3.15.1. Python Interface Specification</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#lifetime-management">3.15.1.1. Lifetime management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#lifetime-management-in-numba">3.15.1.2. Lifetime management in Numba</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#pointer-attributes">3.15.1.3. Pointer Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#differences-with-cuda-array-interface-version-0">3.15.1.4. Differences with CUDA Array Interface (Version 0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#differences-with-cuda-array-interface-version-1">3.15.1.5. Differences with CUDA Array Interface (Version 1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/cuda_array_interface.html#interoperability">3.15.1.6. Interoperability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/external-memory.html">3.16. External Memory Management (EMM) Plugin interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/external-memory.html#overview-of-external-memory-management">3.16.1. Overview of External Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#effects-on-deallocation-strategies">3.16.1.1. Effects on Deallocation Strategies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#management-of-other-objects">3.16.1.2. Management of other objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#asynchronous-allocation-and-deallocation">3.16.1.3. Asynchronous allocation and deallocation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/external-memory.html#implementing-an-emm-plugin">3.16.2. Implementing an EMM Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#the-host-only-cuda-memory-manager">3.16.2.1. The Host-Only CUDA Memory Manager</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/external-memory.html#classes-and-structures-of-returned-objects">3.16.3. Classes and structures of returned objects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#memory-pointers">3.16.3.1. Memory Pointers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#memory-info">3.16.3.2. Memory Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#ipc">3.16.3.3. IPC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda/external-memory.html#setting-the-emm-plugin">3.16.4. Setting the EMM Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#environment-variable">3.16.4.1. Environment variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda/external-memory.html#function">3.16.4.2. Function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda/faq.html">3.17. CUDA Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda/faq.html#nvprof-reports-no-kernels-were-profiled">3.17.1. nvprof reports “No kernels were profiled”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cuda-reference/index.html">4. CUDA Python Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/host.html">4.1. CUDA Host API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#device-management">4.1.1. Device Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#device-detection-and-enquiry">4.1.1.1. Device detection and enquiry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#context-management">4.1.1.2. Context management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#id1">4.1.1.3. Device management</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#measurement">4.1.2. Measurement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#profiling">4.1.2.1. Profiling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/host.html#events">4.1.2.2. Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/host.html#stream-management">4.1.3. Stream Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/kernel.html">4.2. CUDA Kernel API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/kernel.html#kernel-declaration">4.2.1. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/kernel.html#intrinsic-attributes-and-functions">4.2.2. Intrinsic Attributes and Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#thread-indexing">4.2.2.1. Thread Indexing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#memory-management">4.2.2.2. Memory Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#synchronization-and-atomic-operations">4.2.2.3. Synchronization and Atomic Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#memory-fences">4.2.2.4. Memory Fences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#warp-intrinsics">4.2.2.5. Warp Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#integer-intrinsics">4.2.2.6. Integer Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#floating-point-intrinsics">4.2.2.7. Floating Point Intrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuda-reference/kernel.html#control-flow-instructions">4.2.2.8. Control Flow Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cuda-reference/memory.html">4.3. Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cuda-reference/memory.html#device-objects">4.3.1. Device Objects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roc/index.html">5. Numba for AMD ROC GPUs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../roc/overview.html">5.1. Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#terminology">5.1.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#requirements">5.1.2. Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/overview.html#installation">5.1.3. Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/kernels.html">5.2. Writing HSA Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#introduction">5.2.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#introduction-for-cuda-programmers">5.2.2. Introduction for CUDA Programmers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#kernel-declaration">5.2.3. Kernel declaration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#kernel-invocation">5.2.4. Kernel invocation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../roc/kernels.html#choosing-the-workgroup-size">5.2.4.1. Choosing the workgroup size</a></li>
<li class="toctree-l4"><a class="reference internal" href="../roc/kernels.html#multi-dimensional-workgroup-and-grid">5.2.4.2. Multi-dimensional workgroup and grid</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../roc/kernels.html#workitem-positioning">5.2.5. WorkItem positioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/memory.html">5.3. Memory management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#data-transfer">5.3.1. Data transfer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../roc/memory.html#device-arrays">5.3.1.1. Device arrays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../roc/memory.html#data-registration">5.3.1.2. Data Registration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#streams">5.3.2. Streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/memory.html#shared-memory-and-thread-synchronization">5.3.3. Shared memory and thread synchronization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/device-functions.html">5.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roc/intrinsics.html">5.5. Supported Atomic Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/intrinsics.html#example">5.5.1. Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/device-management.html">5.6. The Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roc/ufunc.html">5.7. ROC Ufuncs and Generalized Ufuncs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#basic-roc-ufunc-example">5.7.1. Basic ROC UFunc Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#calling-device-functions-from-roc-ufuncs">5.7.2. Calling Device Functions from ROC UFuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#generalized-roc-ufuncs">5.7.3. Generalized ROC ufuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../roc/ufunc.html#async-execution-a-chunk-at-a-time">5.7.4. Async execution: A Chunk at a Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../roc/examples.html">5.8. Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../roc/examples.html#matrix-multiplication">5.8.1. Matrix multiplication</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">6. Extending Numba</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/high-level.html">6.1. High-level extension API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-functions">6.1.1. Implementing functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-methods">6.1.2. Implementing methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-attributes">6.1.3. Implementing attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#importing-cython-functions">6.1.4. Importing Cython Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/high-level.html#implementing-intrinsics">6.1.5. Implementing intrinsics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/low-level.html">6.2. Low-level extension API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/low-level.html#typing">6.2.1. Typing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/low-level.html#lowering">6.2.2. Lowering</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#native-operations">6.2.2.1. Native operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#constants">6.2.2.2. Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/low-level.html#boxing-and-unboxing">6.2.2.3. Boxing and unboxing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/interval-example.html">6.3. Example: an interval type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#extending-the-typing-layer">6.3.1. Extending the typing layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#creating-a-new-numba-type">6.3.1.1. Creating a new Numba type</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#type-inference-for-python-values">6.3.1.2. Type inference for Python values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#type-inference-for-operations">6.3.1.3. Type inference for operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#extending-the-lowering-layer">6.3.2. Extending the lowering layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#defining-the-data-model-for-native-intervals">6.3.2.1. Defining the data model for native intervals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#exposing-data-model-attributes">6.3.2.2. Exposing data model attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#exposing-a-property">6.3.2.3. Exposing a property</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#implementing-the-constructor">6.3.2.4. Implementing the constructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extending/interval-example.html#boxing-and-unboxing">6.3.2.5. Boxing and unboxing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#using-it">6.3.3. Using it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/interval-example.html#conclusion">6.3.4. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/overloading-guide.html">6.4. A guide to using <code class="docutils literal notranslate"><span class="pre">&#64;overload</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/overloading-guide.html#concrete-example">6.4.1. Concrete Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/overloading-guide.html#implementing-overload-for-numpy-functions">6.4.2. Implementing <code class="docutils literal notranslate"><span class="pre">&#64;overload</span></code> for NumPy functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extending/entrypoints.html">6.5. Registering Extensions with Entry Points</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extending/entrypoints.html#adding-support-for-the-init-entry-point">6.5.1. Adding Support for the “Init” Entry Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extending/entrypoints.html#testing-your-entry-point">6.5.2. Testing your Entry Point</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">7. Developer Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/contributing.html">7.1. Contributing to Numba</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing.html#communication">7.1.1. Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#mailing-list">7.1.1.1. Mailing-list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#real-time-chat">7.1.1.2. Real-time Chat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#weekly-meetings">7.1.1.3. Weekly Meetings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#bug-tracker">7.1.1.4. Bug tracker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing.html#getting-set-up">7.1.2. Getting set up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#build-environment">7.1.2.1. Build environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#building-numba">7.1.2.2. Building Numba</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#running-tests">7.1.2.3. Running tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing.html#development-rules">7.1.3. Development rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#code-reviews">7.1.3.1. Code reviews</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#coding-conventions">7.1.3.2. Coding conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#stability">7.1.3.3. Stability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#platform-support">7.1.3.4. Platform support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing.html#documentation">7.1.4. Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#main-documentation">7.1.4.1. Main documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/contributing.html#web-site-homepage">7.1.4.2. Web site homepage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/repomap.html">7.2. A Map of the Numba Repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/repomap.html#support-files">7.2.1. Support Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#build-and-packaging">7.2.1.1. Build and Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#continuous-integration">7.2.1.2. Continuous Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#documentation-examples">7.2.1.3. Documentation / Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/repomap.html#numba-source-code">7.2.2. Numba Source Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#public-api">7.2.2.1. Public API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#dispatching">7.2.2.2. Dispatching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#compiler-pipeline">7.2.2.3. Compiler Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#type-management">7.2.2.4. Type Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#compiled-extensions">7.2.2.5. Compiled Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#misc-support">7.2.2.6. Misc Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#core-python-data-types">7.2.2.7. Core Python Data Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#math">7.2.2.8. Math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#parallelaccelerator">7.2.2.9. ParallelAccelerator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#stencil">7.2.2.10. Stencil</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#debugging-support">7.2.2.11. Debugging Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#type-signatures-cpu">7.2.2.12. Type Signatures (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#target-implementations-cpu">7.2.2.13. Target Implementations (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#ufunc-compiler-and-runtime">7.2.2.14. Ufunc Compiler and Runtime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#unit-tests-cpu">7.2.2.15. Unit Tests (CPU)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#command-line-utilities">7.2.2.16. Command Line Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#cuda-gpu-target">7.2.2.17. CUDA GPU Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/repomap.html#rocm-gpu-target">7.2.2.18. ROCm GPU Target</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/architecture.html">7.3. Numba architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#introduction">7.3.1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#compiler-architecture">7.3.2. Compiler architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#contexts">7.3.3. Contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/architecture.html#compiler-stages">7.3.4. Compiler stages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-1-analyze-bytecode">7.3.4.1. Stage 1: Analyze bytecode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-2-generate-the-numba-ir">7.3.4.2. Stage 2: Generate the Numba IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-3-macro-expansion">7.3.4.3. Stage 3: Macro expansion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-4-rewrite-untyped-ir">7.3.4.4. Stage 4: Rewrite untyped IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-5-infer-types">7.3.4.5. Stage 5: Infer types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-6a-rewrite-typed-ir">7.3.4.6. Stage 6a: Rewrite typed IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-6b-perform-automatic-parallelization">7.3.4.7. Stage 6b: Perform Automatic Parallelization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-7a-generate-nopython-llvm-ir">7.3.4.8. Stage 7a: Generate nopython LLVM IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-7b-generate-object-mode-llvm-ir">7.3.4.9. Stage 7b: Generate object mode LLVM IR</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/architecture.html#stage-8-compile-llvm-ir-to-machine-code">7.3.4.10. Stage 8: Compile LLVM IR to machine code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/dispatching.html">7.4. Polymorphic dispatching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/dispatching.html#requirements">7.4.1. Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#compile-time-vs-run-time">7.4.1.1. Compile-time vs. run-time</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/dispatching.html#type-resolution">7.4.2. Type resolution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#typecodes">7.4.2.1. Typecodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#hard-coded-fast-paths">7.4.2.2. Hard-coded fast paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#fingerprint-based-typecode-cache">7.4.2.3. Fingerprint-based typecode cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#summary">7.4.2.4. Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/dispatching.html#specialization-selection">7.4.3. Specialization selection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#implicit-conversion-rules">7.4.3.1. Implicit conversion rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#candidates-and-best-match">7.4.3.2. Candidates and best match</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#implementation">7.4.3.3. Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/dispatching.html#id1">7.4.3.4. Summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/dispatching.html#miscellaneous">7.4.4. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/generators.html">7.5. Notes on generators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/generators.html#terminology">7.5.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/generators.html#function-analysis">7.5.2. Function analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/generators.html#the-generator-structure">7.5.3. The generator structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/generators.html#layout">7.5.3.1. Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/generators.html#allocation">7.5.3.2. Allocation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/generators.html#compiling-to-native-code">7.5.4. Compiling to native code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/generators.html#the-next-function">7.5.4.1. The next() function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/numba-runtime.html">7.6. Notes on Numba Runtime</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/numba-runtime.html#memory-management">7.6.1. Memory Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#cooperating-with-cpython">7.6.1.1. Cooperating with CPython</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#compiler-side-cooperation">7.6.1.2. Compiler-side Cooperation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#optimizations">7.6.1.3. Optimizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#quirks">7.6.1.4. Quirks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#debugging-leaks">7.6.1.5. Debugging Leaks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/numba-runtime.html#debugging-leaks-in-c">7.6.1.6. Debugging Leaks in C</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/numba-runtime.html#recursion-support">7.6.2. Recursion Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/numba-runtime.html#using-the-nrt-from-c-code">7.6.3. Using the NRT from C code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/numba-runtime.html#future-plan">7.6.4. Future Plan</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/rewrites.html">7.7. Using the Numba Rewrite Pass for Fun and Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/rewrites.html#overview">7.7.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/rewrites.html#rewriting-passes">7.7.2. Rewriting Passes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#the-rewrite-base-class">7.7.2.1. The <code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code> Base Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#subclassing-rewrite">7.7.2.2. Subclassing <code class="xref py py-class docutils literal notranslate"><span class="pre">Rewrite</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#overloading-rewrite-match">7.7.2.3. Overloading <code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.match()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#overloading-rewrite-apply">7.7.2.4. Overloading <code class="xref py py-func docutils literal notranslate"><span class="pre">Rewrite.apply()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/rewrites.html#the-rewrite-registry">7.7.3. The Rewrite Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/rewrites.html#case-study-array-expressions">7.7.4. Case study: Array Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#the-rewritearrayexprs-match-method">7.7.4.1. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.match()</span></code> method</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#the-rewritearrayexprs-apply-method">7.7.4.2. The <code class="xref py py-func docutils literal notranslate"><span class="pre">RewriteArrayExprs.apply()</span></code> method</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/rewrites.html#the-lower-array-expr-function">7.7.4.3. The <code class="xref py py-func docutils literal notranslate"><span class="pre">_lower_array_expr()</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/rewrites.html#conclusions-and-caveats">7.7.5. Conclusions and Caveats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/live_variable_analysis.html">7.8. Live Variable Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/live_variable_analysis.html#notes-on-behavior-of-the-live-variable-analysis">7.8.1. Notes on behavior of the live variable analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/live_variable_analysis.html#variable-deleted-before-definition">7.8.1.1. Variable deleted before definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/listings.html">7.9. Listings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/listings.html#new-style-listings">7.9.1. New style listings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/autogen_builtins_listing.html">7.9.1.1. Listings for builtins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/autogen_math_listing.html">7.9.1.2. Listings for math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/autogen_cmath_listing.html">7.9.1.3. Listings for cmath</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/autogen_numpy_listing.html">7.9.1.4. Listings for numpy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/listings.html#old-style-listings">7.9.2. Old style listings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/autogen_lower_listing.html">7.9.2.1. Lowering Listing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/stencil.html">7.10. Notes on stencils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/stencil.html#the-stencil-decorator">7.10.1. The stencil decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/stencil.html#handling-the-three-modes">7.10.2. Handling the three modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/stencil.html#outside-jit-context">7.10.2.1. Outside jit context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/stencil.html#jit-without-parallel-true">7.10.2.2. Jit without <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/stencil.html#jit-with-parallel-true">7.10.2.3. Jit with <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/stencil.html#creating-the-stencil-function">7.10.3. Creating the stencil function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/stencil.html#exceptions-raised">7.10.4. Exceptions raised</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/custom_pipeline.html">7.11. Customizing the Compiler</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/custom_pipeline.html#implementing-a-compiler-pass">7.11.1. Implementing a compiler pass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/custom_pipeline.html#compiler-pass-classes">7.11.1.1. Compiler pass classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/custom_pipeline.html#debugging-compiler-passes">7.11.2. Debugging compiler passes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/custom_pipeline.html#observing-ir-changes">7.11.2.1. Observing IR Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/custom_pipeline.html#pass-execution-times">7.11.2.2. Pass execution times</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/inlining.html">7.12. Notes on Inlining</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/inlining.html#example-using-numba-jit">7.12.1. Example using <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.jit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/inlining.html#example-using-numba-extending-overload">7.12.2. Example using <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.extending.overload()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/environment.html">7.13. Environment Object</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/environment.html#the-implementation">7.13.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/environment.html#serialization">7.13.1.1. Serialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/environment.html#usage">7.13.1.2. Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/hashing.html">7.14. Notes on Hashing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/hashing.html#the-implementation">7.14.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/hashing.html#unicode-hash-cache-differences">7.14.1.1. Unicode hash cache differences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/hashing.html#the-accommodation-of-pythonhashseed">7.14.1.2. The accommodation of <code class="docutils literal notranslate"><span class="pre">PYTHONHASHSEED</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/caching.html">7.15. Notes on Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/caching.html#the-implementation">7.15.1. The Implementation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#requirements-for-cacheability">7.15.1.1. Requirements for Cacheability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#features-compatible-with-caching">7.15.1.2. Features Compatible with Caching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#caching-limitations">7.15.1.3. Caching Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#cache-sharing">7.15.1.4. Cache Sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#cache-clearing">7.15.1.5. Cache Clearing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/caching.html#related-environment-variables">7.15.1.6. Related Environment Variables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/threading_implementation.html">7.16. Notes on Numba’s threading implementation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/threading_implementation.html#thread-masking">7.16.1. Thread masking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/threading_implementation.html#programming-model">7.16.1.1. Programming model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/threading_implementation.html#the-implementation">7.16.1.2. The Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/threading_implementation.html#caveats">7.16.1.3. Caveats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/threading_implementation.html#use-in-code-generation">7.16.1.4. Use in Code Generation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/literal.html">7.17. Notes on Literal Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/literal.html#literal-type">7.17.1. <code class="docutils literal notranslate"><span class="pre">Literal</span></code> Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/literal.html#specifying-for-literal-typing">7.17.2. Specifying for Literal Typing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/literal.html#code-example">7.17.2.1. Code Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/literal.html#internal-details">7.17.2.2. Internal Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/literal.html#inside-extensions">7.17.3. Inside Extensions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/debugging.html">7.18. Notes on Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/debugging.html#memcheck">7.18.1. Memcheck</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/roadmap.html">7.19. Numba Project Roadmap</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/roadmap.html#short-term-2019h1">7.19.1. Short Term: 2019H1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/roadmap.html#medium-term-2019h2">7.19.2. Medium Term: 2019H2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/roadmap.html#long-term-2020-and-beyond">7.19.3. Long Term: 2020 and beyond</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proposals/index.html">8. Numba Enhancement Proposals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proposals/index.html#implemented-proposals">8.1. Implemented proposals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proposals/integer-typing.html">8.1.1. NBEP 1: Changes in integer typing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#current-semantics">8.1.1.1. Current semantics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#proposal-predictable-width-conserving-typing">8.1.1.2. Proposal: predictable width-conserving typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/integer-typing.html#proposal-impact">8.1.1.3. Proposal impact</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/external-memory-management.html">8.1.2. NBEP 7: CUDA External Memory Management Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#background-and-goals">8.1.2.1. Background and goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#requirements">8.1.2.2. Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#interface-for-plugin-developers">8.1.2.3. Interface for Plugin developers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#example-implementation-a-rapids-memory-manager-rmm-plugin">8.1.2.4. Example implementation - A RAPIDS Memory Manager (RMM) Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#numba-internal-changes">8.1.2.5. Numba internal changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/external-memory-management.html#prototyping-experimental-implementation">8.1.2.6. Prototyping / experimental implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/index.html#other-proposals">8.2. Other proposals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proposals/extension-points.html">8.2.1. NBEP 2: Extension points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#high-level-api">8.2.1.1. High-level API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#typing">8.2.1.2. Typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/extension-points.html#code-generation">8.2.1.3. Code generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/jit-classes.html">8.2.2. NBEP 3: JIT Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/jit-classes.html#introduction">8.2.2.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/jit-classes.html#proposal-jit-classes">8.2.2.2. Proposal: jit-classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/cfunc.html">8.2.3. NBEP 4: Defining C callbacks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#basic-usage">8.2.3.1. Basic usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#passing-array-data">8.2.3.2. Passing array data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#error-handling">8.2.3.3. Error handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/cfunc.html#deferred-topics">8.2.3.4. Deferred topics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/type-inference.html">8.2.4. NBEP 5: Type Inference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#introduction">8.2.4.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#numba-type-semantic">8.2.4.2. Numba Type Semantic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/type-inference.html#type-inference">8.2.4.3. Type Inference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proposals/typing_recursion.html">8.2.5. NBEP 6: Typing Recursion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#introduction">8.2.5.1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#the-current-state">8.2.5.2. The Current State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#the-solution">8.2.5.3. The Solution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proposals/typing_recursion.html#limitations">8.2.5.4. Limitations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">9. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">10. Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-49-0dev">10.1. Version 0.49.0dev</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-48-0-jan-27-2020">10.2. Version 0.48.0 (Jan 27, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-47-0-jan-2-2020">10.3. Version 0.47.0  (Jan 2, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-46-0">10.4. Version 0.46.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-45-1">10.5. Version 0.45.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-45-0">10.6. Version 0.45.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-44-1">10.7. Version 0.44.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-44-0">10.8. Version 0.44.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-43-1">10.9. Version 0.43.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-43-0">10.10. Version 0.43.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-42-1">10.11. Version 0.42.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-42-0">10.12. Version 0.42.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-41-0">10.13. Version 0.41.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-40-1">10.14. Version 0.40.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-40-0">10.15. Version 0.40.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-39-0">10.16. Version 0.39.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-38-1">10.17. Version 0.38.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-38-0">10.18. Version 0.38.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-37-0">10.19. Version 0.37.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-36-2">10.20. Version 0.36.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-36-1">10.21. Version 0.36.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-35-0">10.22. Version 0.35.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-34-0">10.23. Version 0.34.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-33-0">10.24. Version 0.33.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-32-0">10.25. Version 0.32.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-31-0">10.26. Version 0.31.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-30-1">10.27. Version 0.30.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-30-0">10.28. Version 0.30.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-29-0">10.29. Version 0.29.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-28-1">10.30. Version 0.28.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-28-0">10.31. Version 0.28.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-27-0">10.32. Version 0.27.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-26-0">10.33. Version 0.26.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-25-0">10.34. Version 0.25.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-24-0">10.35. Version 0.24.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-23-1">10.36. Version 0.23.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-23-0">10.37. Version 0.23.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-22-1">10.38. Version 0.22.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-22-0">10.39. Version 0.22.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-21-0">10.40. Version 0.21.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-20-0">10.41. Version 0.20.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-2">10.42. Version 0.19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-1">10.43. Version 0.19.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-19-0">10.44. Version 0.19.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-18-2">10.45. Version 0.18.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-18-1">10.46. Version 0.18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-17-0">10.47. Version 0.17.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-16-0">10.48. Version 0.16.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-15-1">10.49. Version 0.15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-15">10.50. Version 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-14">10.51. Version 0.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-4">10.52. Version 0.13.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-3">10.53. Version 0.13.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-2">10.54. Version 0.13.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13-1">10.55. Version 0.13.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-13">10.56. Version 0.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12-2">10.57. Version 0.12.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12-1">10.58. Version 0.12.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-12">10.59. Version 0.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-11">10.60. Version 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-10">10.61. Version 0.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-9">10.62. Version 0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-8">10.63. Version 0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7-2">10.64. Version 0.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7-1">10.65. Version 0.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-7">10.66. Version 0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-6-1">10.67. Version 0.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-6">10.68. Version 0.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-5">10.69. Version 0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-4">10.70. Version 0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-3-2">10.71. Version 0.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-3">10.72. Version 0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes.html#version-0-2">10.73. Version 0.2</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Numba</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">1. User Manual</a> &raquo;</li>
        
      <li>1.17. Troubleshooting and tips</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user/troubleshoot.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="troubleshooting-and-tips">
<span id="numba-troubleshooting"></span><h1>1.17. Troubleshooting and tips<a class="headerlink" href="#troubleshooting-and-tips" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-to-compile">
<span id="id1"></span><h2>1.17.1. What to compile<a class="headerlink" href="#what-to-compile" title="Permalink to this headline">¶</a></h2>
<p>The general recommendation is that you should only try to compile the
critical paths in your code.  If you have a piece of performance-critical
computational code amongst some higher-level code, you may factor out
the performance-critical code in a separate function and compile the
separate function with Numba.  Letting Numba focus on that small piece
of performance-critical code has several advantages:</p>
<ul class="simple">
<li><p>it reduces the risk of hitting unsupported features;</p></li>
<li><p>it reduces the compilation times;</p></li>
<li><p>it allows you to evolve the higher-level code which is outside of the
compiled function much easier.</p></li>
</ul>
</div>
<div class="section" id="my-code-doesn-t-compile">
<span id="code-doesnt-compile"></span><h2>1.17.2. My code doesn’t compile<a class="headerlink" href="#my-code-doesn-t-compile" title="Permalink to this headline">¶</a></h2>
<p>There can be various reasons why Numba cannot compile your code, and raises
an error instead.  One common reason is that your code relies on an
unsupported Python feature, especially in <a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a>.
Please see the list of <a class="reference internal" href="../reference/pysupported.html#pysupported"><span class="std std-ref">Supported Python features</span></a>.  If you find something that
is listed there and still fails compiling, please
<a class="reference internal" href="../developer/contributing.html#report-numba-bugs"><span class="std std-ref">report a bug</span></a>.</p>
<p>When Numba tries to compile your code it first tries to work out the types of
all the variables in use, this is so it can generate a type specific
implementation of your code that can be compiled down to machine code. A common
reason for Numba failing to compile (especially in <a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a>) is a
type inference failure, essentially Numba cannot work out what the type of all
the variables in your code should be.</p>
<p>For example, let’s consider this trivial function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>If you call it with two numbers, Numba is able to infer the types properly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">    3</span>
</pre></div>
</div>
<p>If however you call it with a tuple and a number, Numba is unable to say
what the result of adding a tuple and number is, and therefore compilation
errors out:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f(1, (2,))
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;&lt;path&gt;/numba/numba/dispatcher.py&quot;, line 339, in _compile_for_args
    reraise(type(e), e, None)
File &quot;&lt;path&gt;/numba/numba/six.py&quot;, line 658, in reraise
    raise value.with_traceback(tb)
numba.errors.TypingError: Failed at nopython (nopython frontend)
Invalid use of + with parameters (int64, tuple(int64 x 1))
Known signatures:
* (int64, int64) -&gt; int64
* (int64, uint64) -&gt; int64
* (uint64, int64) -&gt; int64
* (uint64, uint64) -&gt; uint64
* (float32, float32) -&gt; float32
* (float64, float64) -&gt; float64
* (complex64, complex64) -&gt; complex64
* (complex128, complex128) -&gt; complex128
* (uint16,) -&gt; uint64
* (uint8,) -&gt; uint64
* (uint64,) -&gt; uint64
* (uint32,) -&gt; uint64
* (int16,) -&gt; int64
* (int64,) -&gt; int64
* (int8,) -&gt; int64
* (int32,) -&gt; int64
* (float32,) -&gt; float32
* (float64,) -&gt; float64
* (complex64,) -&gt; complex64
* (complex128,) -&gt; complex128
* parameterized
[1] During: typing of intrinsic-call at &lt;stdin&gt; (3)

File &quot;&lt;stdin&gt;&quot;, line 3:
</pre></div>
</div>
<p>The error message helps you find out what went wrong:
“Invalid use of + with parameters (int64, tuple(int64 x 1))” is to be
interpreted as “Numba encountered an addition of variables typed as integer
and 1-tuple of integer, respectively, and doesn’t know about any such
operation”.</p>
<p>Note that if you allow object mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>compilation will succeed and the compiled function will raise at runtime as
Python would do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,))</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unsupported operand type(s) for +: &#39;int&#39; and &#39;tuple&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="my-code-has-a-type-unification-problem">
<h2>1.17.3. My code has a type unification problem<a class="headerlink" href="#my-code-has-a-type-unification-problem" title="Permalink to this headline">¶</a></h2>
<p>Another common reason for Numba not being able to compile your code is that it
cannot statically determine the return type of a function. The most likely
cause of this is the return type depending on a value that is available only at
runtime. Again, this is most often problematic when using
<a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a>. The concept of type unification is simply trying to find
a type in which two variables could safely be represented. For example a 64 bit
float and a 64 bit complex number could both be represented in a 128 bit complex
number.</p>
<p>As an example of type unification failure, this function has a return type that
is determined at runtime based on the value of <cite>x</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">...</span><span class="p">:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
<span class="o">...</span><span class="p">:</span>     <span class="k">else</span><span class="p">:</span>
<span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="o">...</span><span class="p">:</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Trying to execute this function, errors out as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TypingError</span><span class="p">:</span> <span class="n">Failed</span> <span class="n">at</span> <span class="n">nopython</span> <span class="p">(</span><span class="n">nopython</span> <span class="n">frontend</span><span class="p">)</span>
<span class="n">Can</span><span class="s1">&#39;t unify return type from the following types: tuple(int64 x 1), int64</span>
<span class="n">Return</span> <span class="n">of</span><span class="p">:</span> <span class="n">IR</span> <span class="n">name</span> <span class="s1">&#39;$8.2&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="s1">&#39;(int64 x 1)&#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span>
<span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-2-51ef1cc64bea&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span><span class="p">:</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="o">&lt;</span><span class="n">source</span> <span class="n">elided</span><span class="o">&gt;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span>
        <span class="o">^</span>
<span class="n">Return</span> <span class="n">of</span><span class="p">:</span> <span class="n">IR</span> <span class="n">name</span> <span class="s1">&#39;$12.2&#39;</span><span class="p">,</span> <span class="nb">type</span> <span class="s1">&#39;int64&#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">:</span>
<span class="n">File</span> <span class="s2">&quot;&lt;ipython-input-2-51ef1cc64bea&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">6</span><span class="p">:</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="o">&lt;</span><span class="n">source</span> <span class="n">elided</span><span class="o">&gt;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The error message “Can’t unify return type from the following types:
tuple(int64 x 1), int64” should be read as “Numba cannot find a type that
can safely represent a 1-tuple of integer and an integer”.</p>
</div>
<div class="section" id="my-code-has-an-untyped-list-problem">
<span id="code-has-untyped-list"></span><h2>1.17.4. My code has an untyped list problem<a class="headerlink" href="#my-code-has-an-untyped-list-problem" title="Permalink to this headline">¶</a></h2>
<p>As <a class="reference internal" href="#code-doesnt-compile"><span class="std std-ref">noted previously</span></a> the first part of Numba
compiling your code involves working out what the types of all the variables
are. In the case of lists, a list must contain items that are of the same type
or can be empty if the type can be inferred from some later operation. What is
not possible is to have a list which is defined as empty and has no inferable
type (i.e. an untyped list).</p>
<p>For example, this is using a list of a known type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="c1"># this list is defined on construction with `int` type</span>
</pre></div>
</div>
<p>This is using an empty list, but the type can be inferred:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># defined empty</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">tmp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c1"># list type can be inferred from the type of `i`</span>
    <span class="k">return</span> <span class="n">tmp</span>
</pre></div>
</div>
<p>This is using an empty list and the type cannot be inferred:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># defined empty</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="c1"># ERROR: the type of `tmp` is unknown</span>
</pre></div>
</div>
<p>Whilst slightly contrived, if you need an empty list and the type cannot be
inferred but you know what type you want the list to be, this “trick” can be
used to instruct the typing mechanism:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">jit</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="nd">@jit</span><span class="p">(</span><span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># define empty list, but instruct that the type is np.complex64</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">complex64</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="c1"># the type of `tmp` is known, but it is still empty</span>
</pre></div>
</div>
</div>
<div class="section" id="the-compiled-code-is-too-slow">
<h2>1.17.5. The compiled code is too slow<a class="headerlink" href="#the-compiled-code-is-too-slow" title="Permalink to this headline">¶</a></h2>
<p>The most common reason for slowness of a compiled JIT function is that
compiling in <a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a> has failed and the Numba compiler has
fallen back to <a class="reference internal" href="../glossary.html#term-object-mode"><span class="xref std std-term">object mode</span></a>.  <a class="reference internal" href="../glossary.html#term-object-mode"><span class="xref std std-term">object mode</span></a> currently provides
little to no speedup compared to regular Python interpretation, and its
main point is to allow an internal optimization known as
<a class="reference internal" href="../glossary.html#term-loop-lifting"><span class="xref std std-term">loop-lifting</span></a>: this optimization will allow to compile inner
loops in <a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a> regardless of what code surrounds those
inner loops.</p>
<p>To find out if type inference succeeded on your function, you can use
the <a class="reference internal" href="../reference/jit-compilation.html#Dispatcher.inspect_types" title="Dispatcher.inspect_types"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inspect_types()</span></code></a> method on the compiled function.</p>
<p>For example, let’s take the following function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@jit</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span>
</pre></div>
</div>
<p>When called with numbers, this function should be fast as Numba is able
to convert number types to floating-point numbers.  Let’s see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">inspect_types</span><span class="p">()</span>
<span class="go">f (int64, int64)</span>
<span class="go">--------------------------------------------------------------------------------</span>
<span class="go"># --- LINE 7 ---</span>

<span class="go">@jit</span>

<span class="go"># --- LINE 8 ---</span>

<span class="go">def f(a, b):</span>

<span class="go">    # --- LINE 9 ---</span>
<span class="go">    # label 0</span>
<span class="go">    #   a.1 = a  :: int64</span>
<span class="go">    #   del a</span>
<span class="go">    #   b.1 = b  :: int64</span>
<span class="go">    #   del b</span>
<span class="go">    #   $0.2 = global(float: &lt;class &#39;float&#39;&gt;)  :: Function(&lt;class &#39;float&#39;&gt;)</span>
<span class="go">    #   $0.4 = call $0.2(b.1, )  :: (int64,) -&gt; float64</span>
<span class="go">    #   del b.1</span>
<span class="go">    #   del $0.2</span>
<span class="go">    #   $0.5 = a.1 + $0.4  :: float64</span>
<span class="go">    #   del a.1</span>
<span class="go">    #   del $0.4</span>
<span class="go">    #   s = $0.5  :: float64</span>
<span class="go">    #   del $0.5</span>

<span class="go">    s = a + float(b)</span>

<span class="go">    # --- LINE 10 ---</span>
<span class="go">    #   $0.7 = cast(value=s)  :: float64</span>
<span class="go">    #   del s</span>
<span class="go">    #   return $0.7</span>

<span class="go">    return s</span>
</pre></div>
</div>
<p>Without trying to understand too much of the Numba intermediate representation,
it is still visible that all variables and temporary values have had their
types inferred properly: for example <em>a</em> has the type <code class="docutils literal notranslate"><span class="pre">int64</span></code>, <em>$0.5</em> has
the type <code class="docutils literal notranslate"><span class="pre">float64</span></code>, etc.</p>
<p>However, if <em>b</em> is passed as a string, compilation will fall back on object
mode as the float() constructor with a string is currently not supported
by Numba:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">inspect_types</span><span class="p">()</span>
<span class="go">[... snip annotations for other signatures, see above ...]</span>
<span class="go">================================================================================</span>
<span class="go">f (int64, str)</span>
<span class="go">--------------------------------------------------------------------------------</span>
<span class="go"># --- LINE 7 ---</span>

<span class="go">@jit</span>

<span class="go"># --- LINE 8 ---</span>

<span class="go">def f(a, b):</span>

<span class="go">    # --- LINE 9 ---</span>
<span class="go">    # label 0</span>
<span class="go">    #   a.1 = a  :: pyobject</span>
<span class="go">    #   del a</span>
<span class="go">    #   b.1 = b  :: pyobject</span>
<span class="go">    #   del b</span>
<span class="go">    #   $0.2 = global(float: &lt;class &#39;float&#39;&gt;)  :: pyobject</span>
<span class="go">    #   $0.4 = call $0.2(b.1, )  :: pyobject</span>
<span class="go">    #   del b.1</span>
<span class="go">    #   del $0.2</span>
<span class="go">    #   $0.5 = a.1 + $0.4  :: pyobject</span>
<span class="go">    #   del a.1</span>
<span class="go">    #   del $0.4</span>
<span class="go">    #   s = $0.5  :: pyobject</span>
<span class="go">    #   del $0.5</span>

<span class="go">    s = a + float(b)</span>

<span class="go">    # --- LINE 10 ---</span>
<span class="go">    #   $0.7 = cast(value=s)  :: pyobject</span>
<span class="go">    #   del s</span>
<span class="go">    #   return $0.7</span>

<span class="go">    return s</span>
</pre></div>
</div>
<p>Here we see that all variables end up typed as <code class="docutils literal notranslate"><span class="pre">pyobject</span></code>.  This means
that the function was compiled in object mode and values are passed
around as generic Python objects, without Numba trying to look into them
to reason about their raw values.  This is a situation you want to avoid
when caring about the speed of your code.</p>
<p>If a function fails to compile in <code class="docutils literal notranslate"><span class="pre">nopython</span></code> mode warnings will be emitted
with explanation as to why compilation failed. For example with the <code class="docutils literal notranslate"><span class="pre">f()</span></code>
function above (slightly edited for documentation purposes):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
<span class="go">example.py:7: NumbaWarning:</span>
<span class="go">Compilation is falling back to object mode WITH looplifting enabled because Function &quot;f&quot; failed type inference due to: Invalid use of Function(&lt;class &#39;float&#39;&gt;) with argument(s) of type(s): (unicode_type)</span>
<span class="go">* parameterized</span>
<span class="go">In definition 0:</span>
<span class="go">    TypeError: float() only support for numbers</span>
<span class="go">    raised from &lt;path&gt;/numba/typing/builtins.py:880</span>
<span class="go">In definition 1:</span>
<span class="go">    TypeError: float() only support for numbers</span>
<span class="go">    raised from &lt;path&gt;/numba/typing/builtins.py:880</span>
<span class="go">This error is usually caused by passing an argument of a type that is unsupported by the named function.</span>
<span class="go">[1] During: resolving callee type: Function(&lt;class &#39;float&#39;&gt;)</span>
<span class="go">[2] During: typing of call at example.py (9)</span>


<span class="go">File &quot;example.py&quot;, line 9:</span>
<span class="go">def f(a, b):</span>
<span class="go">    s = a + float(b)</span>
<span class="go">    ^</span>

<span class="go">&lt;path&gt;/numba/compiler.py:722: NumbaWarning: Function &quot;f&quot; was compiled in object mode without forceobj=True.</span>

<span class="go">File &quot;example.py&quot;, line 8:</span>
<span class="go">@jit</span>
<span class="go">def f(a, b):</span>
<span class="go">^</span>

<span class="go">3.0</span>
</pre></div>
</div>
</div>
<div class="section" id="disabling-jit-compilation">
<h2>1.17.6. Disabling JIT compilation<a class="headerlink" href="#disabling-jit-compilation" title="Permalink to this headline">¶</a></h2>
<p>In order to debug code, it is possible to disable JIT compilation, which makes
the <code class="docutils literal notranslate"><span class="pre">jit</span></code> decorator (and the <code class="docutils literal notranslate"><span class="pre">njit</span></code> decorator) act as if
they perform no operation, and the invocation of decorated functions calls the
original Python function instead of a compiled version. This can be toggled by
setting the <span class="target" id="index-0"></span><a class="reference internal" href="../reference/envvars.html#envvar-NUMBA_DISABLE_JIT"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NUMBA_DISABLE_JIT</span></code></a> enviroment variable to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>When this mode is enabled, the <code class="docutils literal notranslate"><span class="pre">vectorize</span></code> and <code class="docutils literal notranslate"><span class="pre">guvectorize</span></code> decorators will
still result in compilation of a ufunc, as there is no straightforward pure
Python implementation of these functions.</p>
</div>
<div class="section" id="debugging-jit-compiled-code-with-gdb">
<span id="debugging-jit-compiled-code"></span><h2>1.17.7. Debugging JIT compiled code with GDB<a class="headerlink" href="#debugging-jit-compiled-code-with-gdb" title="Permalink to this headline">¶</a></h2>
<p>Setting the <code class="docutils literal notranslate"><span class="pre">debug</span></code> keyword argument in the <code class="docutils literal notranslate"><span class="pre">jit</span></code> decorator
(e.g. <code class="docutils literal notranslate"><span class="pre">&#64;jit(debug=True)</span></code>) enables the emission of debug info in the jitted
code.  To debug, GDB version 7.0 or above is required.  Currently, the following
debug info is available:</p>
<ul class="simple">
<li><p>Function name will be shown in the backtrace.  But, no type information.</p></li>
<li><p>Source location (filename and line number) is available.  For example,
user can set break point by the absolute filename and line number;
e.g. <code class="docutils literal notranslate"><span class="pre">break</span> <span class="pre">/path/to/myfile.py:6</span></code>.</p></li>
<li><p>Local variables in the current function can be shown with <code class="docutils literal notranslate"><span class="pre">info</span> <span class="pre">locals</span></code>.</p></li>
<li><p>Type of variable with <code class="docutils literal notranslate"><span class="pre">whatis</span> <span class="pre">myvar</span></code>.</p></li>
<li><p>Value of variable with <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">myvar</span></code> or <code class="docutils literal notranslate"><span class="pre">display</span> <span class="pre">myvar</span></code>.</p>
<ul>
<li><p>Simple numeric types, i.e. int, float and double, are shown in their
native representation.  But, integers are assumed to be signed.</p></li>
<li><p>Other types are shown as sequence of bytes.</p></li>
</ul>
</li>
</ul>
<p>Known issues:</p>
<ul class="simple">
<li><p>Stepping depends heavily on optimization level.</p>
<ul>
<li><p>At full optimization (equivalent to O3), most of the variables are
optimized out.</p></li>
<li><p>With no optimization (e.g. <code class="docutils literal notranslate"><span class="pre">NUMBA_OPT=0</span></code>), source location jumps around
when stepping through the code.</p></li>
<li><p>At O1 optimization (e.g. <code class="docutils literal notranslate"><span class="pre">NUMBA_OPT=1</span></code>), stepping is stable but some
variables are optimized out.</p></li>
</ul>
</li>
<li><p>Memory consumption increases significantly with debug info enabled.
The compiler emits extra information (<a class="reference external" href="http://www.dwarfstd.org/">DWARF</a>)
along with the instructions.  The emitted object code can be 2x bigger with
debug info.</p></li>
</ul>
<p>Internal details:</p>
<ul>
<li><p>Since Python semantics allow variables to bind to value of different types,
Numba internally creates multiple versions of the variable for each type.
So for code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># type int</span>
<span class="n">x</span> <span class="o">=</span> <span class="mf">2.3</span>       <span class="c1"># type float</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># type 3-tuple of int</span>
</pre></div>
</div>
<p>Each assignments will store to a different variable name.  In the debugger,
the variables will be <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">x$1</span></code> and <code class="docutils literal notranslate"><span class="pre">x$2</span></code>.  (In the Numba IR, they are
<code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">x.1</span></code> and <code class="docutils literal notranslate"><span class="pre">x.2</span></code>.)</p>
</li>
<li><p>When debug is enabled, inlining of the function is disabled.</p></li>
</ul>
<div class="section" id="example-debug-usage">
<h3>1.17.7.1. Example debug usage<a class="headerlink" href="#example-debug-usage" title="Permalink to this headline">¶</a></h3>
<p>The python source:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>

<span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mf">2.34</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

<span class="n">r</span><span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ NUMBA_OPT=1 gdb -q python
</span>Reading symbols from python...done.
(gdb) break /home/user/chk_debug.py:5
No source file named /home/user/chk_debug.py.
Make breakpoint pending on future shared library load? (y or [n]) y

Breakpoint 1 (/home/user/chk_debug.py:5) pending.
<span class="hll">(gdb) run chk_debug.py
</span>Starting program: /home/user/miniconda/bin/python chk_debug.py
...
Breakpoint 1, __main__::foo$241(long long) () at chk_debug.py:5
5         b = a + 1
<span class="hll">(gdb) n
</span>6         c = a * 2.34
<span class="hll">(gdb) bt
</span>#0  __main__::foo$241(long long) () at chk_debug.py:6
#1  0x00007ffff7fec47c in cpython::__main__::foo$241(long long) ()
#2  0x00007fffeb7976e2 in call_cfunc (locals=0x0, kws=0x0, args=0x7fffeb486198,
...
<span class="hll">(gdb) info locals
</span>a = 0
d = &lt;error reading variable d (DWARF-2 expression error: `DW_OP_stack_value&#39; operations must be used either alone or in conjunction with DW_OP_piece or DW_OP_bit_piece.)&gt;
c = 0
b = 124
<span class="hll">(gdb) whatis b
</span>type = i64
<span class="hll">(gdb) whatis d
</span>type = {i64, i64, double}
<span class="hll">(gdb) print b
</span>$2 = 124
</pre></div>
</div>
</div>
<div class="section" id="globally-override-debug-setting">
<h3>1.17.7.2. Globally override debug setting<a class="headerlink" href="#globally-override-debug-setting" title="Permalink to this headline">¶</a></h3>
<p>It is possible to enable debug for the full application by setting environment
variable <code class="docutils literal notranslate"><span class="pre">NUMBA_DEBUGINFO=1</span></code>.  This sets the default value of the <code class="docutils literal notranslate"><span class="pre">debug</span></code>
option in <code class="docutils literal notranslate"><span class="pre">jit</span></code>.  Debug can be turned off on individual functions by setting
<code class="docutils literal notranslate"><span class="pre">debug=False</span></code>.</p>
<p>Beware that enabling debug info significantly increases the memory consumption
for each compiled function.  For large application, this may cause out-of-memory
error.</p>
</div>
</div>
<div class="section" id="using-numba-s-direct-gdb-bindings-in-nopython-mode">
<h2>1.17.8. Using Numba’s direct <code class="docutils literal notranslate"><span class="pre">gdb</span></code> bindings in <code class="docutils literal notranslate"><span class="pre">nopython</span></code>  mode<a class="headerlink" href="#using-numba-s-direct-gdb-bindings-in-nopython-mode" title="Permalink to this headline">¶</a></h2>
<p>Numba (version 0.42.0 and later) has some additional functions relating to
<code class="docutils literal notranslate"><span class="pre">gdb</span></code> support for CPUs that make it easier to debug programs. All the <code class="docutils literal notranslate"><span class="pre">gdb</span></code>
related functions described in the following work in the same manner
irrespective of whether they are called from the standard CPython interpreter or
code compiled in either <a class="reference internal" href="../glossary.html#term-nopython-mode"><span class="xref std std-term">nopython mode</span></a> or <a class="reference internal" href="../glossary.html#term-object-mode"><span class="xref std std-term">object mode</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is experimental!</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature does unexpected things if used from Jupyter or
alongside the <code class="docutils literal notranslate"><span class="pre">pdb</span></code> module. It’s behaviour is harmless, just hard
to predict!</p>
</div>
<div class="section" id="set-up">
<h3>1.17.8.1. Set up<a class="headerlink" href="#set-up" title="Permalink to this headline">¶</a></h3>
<p>Numba’s <code class="docutils literal notranslate"><span class="pre">gdb</span></code> related functions make use of a <code class="docutils literal notranslate"><span class="pre">gdb</span></code> binary, the location and
name of this binary can be configured via the <span class="target" id="index-1"></span><a class="reference internal" href="../reference/envvars.html#envvar-NUMBA_GDB_BINARY"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NUMBA_GDB_BINARY</span></code></a>
environment variable if desired.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Numba’s <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support requires the ability for <code class="docutils literal notranslate"><span class="pre">gdb</span></code> to attach to
another process. On some systems (notably Ubuntu Linux) default
security restrictions placed on <code class="docutils literal notranslate"><span class="pre">ptrace</span></code> prevent this from being
possible. This restriction is enforced at the system level by the
Linux security module <cite>Yama</cite>. Documentation for this module and the
security implications of making changes to its behaviour can be found
in the <a class="reference external" href="https://www.kernel.org/doc/Documentation/admin-guide/LSM/Yama.rst">Linux Kernel documentation</a>.
The <a class="reference external" href="https://wiki.ubuntu.com/Security/Features#ptrace">Ubuntu Linux security documentation</a>
discusses how to adjust the behaviour of <cite>Yama</cite> on with regards to
<code class="docutils literal notranslate"><span class="pre">ptrace_scope</span></code> so as to permit the required behaviour.</p>
</div>
</div>
<div class="section" id="basic-gdb-support">
<h3>1.17.8.2. Basic <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support<a class="headerlink" href="#basic-gdb-support" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Calling <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> and/or <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_init()</span></code> more than
once in the same program is not advisable, unexpected things may
happen. If multiple breakpoints are desired within a program,
launch <code class="docutils literal notranslate"><span class="pre">gdb</span></code> once via <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> or <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_init()</span></code>
and then use <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_breakpoint()</span></code> to register additional
breakpoint locations.</p>
</div>
<p>The most simple function for adding <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support is <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code>, which,
at the call location, will:</p>
<ul class="simple">
<li><p>launch <code class="docutils literal notranslate"><span class="pre">gdb</span></code> and attach it to the running process.</p></li>
<li><p>create a breakpoint at the site of the <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> function call, the
attached <code class="docutils literal notranslate"><span class="pre">gdb</span></code> will pause execution here awaiting user input.</p></li>
</ul>
<p>use of this functionality is best motivated by example, continuing with the
example used above:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span><span class="p">,</span> <span class="n">gdb</span>

<span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">gdb</span><span class="p">()</span> <span class="c1"># instruct Numba to attach gdb at this location and pause execution</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mf">2.34</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

<span class="n">r</span><span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal (<code class="docutils literal notranslate"><span class="pre">...</span></code> on a line by itself indicates output that is not
presented for brevity):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ NUMBA_OPT=0 python demo_gdb.py
</span>Attaching to PID: 27157
GNU gdb (GDB) Red Hat Enterprise Linux 8.0.1-36.el7
...
Attaching to process 27157
...
Reading symbols from &lt;elided for brevity&gt; ...done.
0x00007f0380c31550 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
Breakpoint 1 at 0x7f036ac388f0: file numba/_helperlib.c, line 1090.
Continuing.

Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) s
</span>Single stepping until exit from function _ZN5numba7targets8gdb_hook8hook_gdb12$3clocals$3e8impl$242E5Tuple,
which has no line number information.
__main__::foo$241(long long) () at demo_gdb.py:7
7           c = a * 2.34
<span class="hll">(gdb) l
</span>2
3       @njit(debug=True)
4       def foo(a):
5           b = a + 1
6           gdb() # instruct Numba to attach gdb at this location and pause execution
7           c = a * 2.34
8           d = (a, b, c)
9           print(a, b, c, d)
10
11      r= foo(123)
<span class="hll">(gdb) p a
</span>$1 = 123
<span class="hll">(gdb) p b
</span>$2 = 124
<span class="hll">(gdb) p c
</span>$3 = 0
<span class="hll">(gdb) n
</span>8           d = (a, b, c)
<span class="hll">(gdb) p c
</span>$4 = 287.81999999999999
</pre></div>
</div>
<p>It can be seen in the above example that execution of the code is paused at the
location of the <code class="docutils literal notranslate"><span class="pre">gdb()</span></code> function call at end of the <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code>
function (this is the Numba internal symbol registered as breakpoint with
<code class="docutils literal notranslate"><span class="pre">gdb</span></code>). Issuing a <code class="docutils literal notranslate"><span class="pre">step</span></code> at this point moves to the stack frame of the
compiled Python source. From there, it can be seen that the variables <code class="docutils literal notranslate"><span class="pre">a</span></code> and
<code class="docutils literal notranslate"><span class="pre">b</span></code> have been evaluated but <code class="docutils literal notranslate"><span class="pre">c</span></code> has not, as demonstrated by printing their
values, this is precisely as expected given the location of the <code class="docutils literal notranslate"><span class="pre">gdb()</span></code> call.
Issuing a <code class="docutils literal notranslate"><span class="pre">next</span></code> then evaluates line <code class="docutils literal notranslate"><span class="pre">7</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code> is assigned a value as
demonstrated by the final print.</p>
</div>
<div class="section" id="running-with-gdb-enabled">
<h3>1.17.8.3. Running with <code class="docutils literal notranslate"><span class="pre">gdb</span></code> enabled<a class="headerlink" href="#running-with-gdb-enabled" title="Permalink to this headline">¶</a></h3>
<p>The functionality provided by <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> (launch and attach <code class="docutils literal notranslate"><span class="pre">gdb</span></code> to
the executing process and pause on a breakpoint) is also available as two
separate functions:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_init()</span></code> this function injects code at the call site to launch
and attach <code class="docutils literal notranslate"><span class="pre">gdb</span></code> to the executing process but does not pause execution.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_breakpoint()</span></code> this function injects code at the call site that
will call the special <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> function that is registered as
a breakpoint in Numba’s <code class="docutils literal notranslate"><span class="pre">gdb</span></code> support. This is demonstrated in the next
section.</p></li>
</ul>
<p>This functionality enables more complex debugging capabilities. Again, motivated
by example, debugging a ‘segfault’ (memory access violation signalling
<code class="docutils literal notranslate"><span class="pre">SIGSEGV</span></code>):</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span><span class="p">,</span> <span class="n">gdb_init</span>
  <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

  <span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
      <span class="n">gdb_init</span><span class="p">()</span> <span class="c1"># instruct Numba to attach gdb at this location, but not to pause execution</span>
      <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mf">2.34</span>
      <span class="n">d</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="c1"># access an address that is a) invalid b) out of the page</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

  <span class="n">bad_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">1e9</span><span class="p">)</span> <span class="c1"># this index is invalid</span>
  <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">bad_index</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal (<code class="docutils literal notranslate"><span class="pre">...</span></code> on a line by itself indicates output that is not
presented for brevity):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ python demo_gdb_segfault.py
</span>Attaching to PID: 5444
GNU gdb (GDB) Red Hat Enterprise Linux 8.0.1-36.el7
...
Attaching to process 5444
...
Reading symbols from &lt;elided for brevity&gt; ...done.
0x00007f8d8010a550 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
Breakpoint 1 at 0x7f8d6a1118f0: file numba/_helperlib.c, line 1090.
Continuing.

0x00007fa7b810a41f in __main__::foo$241(Array&lt;long long, 1, C, mutable, aligned&gt;, long long) () at demo_gdb_segfault.py:9
9           d = c[index] # access an address that is a) invalid b) out of the page
<span class="hll">(gdb) p index
</span>$1 = 1000000000
<span class="hll">(gdb) p c
</span>$2 = &quot;p\202\017\364\371U\000\000\000\000\000\000\000\000\000\000\n\000\000\000\000\000\000\000\b\000\000\000\000\000\000\000\240\202\017\364\371U\000\000\n\000\000\000\000\000\000\000\b\000\000\000\000\000\000&quot;
<span class="hll">(gdb) whatis c
</span>type = {i8*, i8*, i64, i64, double*, [1 x i64], [1 x i64]}
<span class="hll">(gdb) x /32xb c
</span>0x7ffd56195068: 0x70    0x82    0x0f    0xf4    0xf9    0x55    0x00    0x00
0x7ffd56195070: 0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x7ffd56195078: 0x0a    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x7ffd56195080: 0x08    0x00    0x00    0x00    0x00    0x00    0x00    0x00
</pre></div>
</div>
<p>In the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> output it can be noted that the <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> function
was registered as a breakpoint (its symbol is in <code class="docutils literal notranslate"><span class="pre">numba/_helperlib.c</span></code>),
that a <code class="docutils literal notranslate"><span class="pre">SIGSEGV</span></code> signal was caught, and the line in which the access violation
occurred is printed.</p>
<p>Continuing the example as a debugging session demonstration, first <code class="docutils literal notranslate"><span class="pre">index</span></code>
can be printed, and it is evidently 1e9. Printing <code class="docutils literal notranslate"><span class="pre">c</span></code> gives a lot of bytes, so
the type needs looking up. The type of <code class="docutils literal notranslate"><span class="pre">c</span></code> shows the layout for the array
<code class="docutils literal notranslate"><span class="pre">c</span></code> based on its <code class="docutils literal notranslate"><span class="pre">DataModel</span></code> (look in the Numba source
<code class="docutils literal notranslate"><span class="pre">numba.datamodel.models</span></code> for the layouts, the <code class="docutils literal notranslate"><span class="pre">ArrayModel</span></code> is presented
below for ease).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArrayModel</span><span class="p">(</span><span class="n">StructModel</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dmm</span><span class="p">,</span> <span class="n">fe_type</span><span class="p">):</span>
        <span class="n">ndim</span> <span class="o">=</span> <span class="n">fe_type</span><span class="o">.</span><span class="n">ndim</span>
        <span class="n">members</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;meminfo&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MemInfoPointer</span><span class="p">(</span><span class="n">fe_type</span><span class="o">.</span><span class="n">dtype</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">pyobject</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;nitems&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">intp</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;itemsize&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">intp</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">CPointer</span><span class="p">(</span><span class="n">fe_type</span><span class="o">.</span><span class="n">dtype</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;shape&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UniTuple</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">intp</span><span class="p">,</span> <span class="n">ndim</span><span class="p">)),</span>
            <span class="p">(</span><span class="s1">&#39;strides&#39;</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UniTuple</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">intp</span><span class="p">,</span> <span class="n">ndim</span><span class="p">)),</span>
        <span class="p">]</span>
</pre></div>
</div>
<p>The type inspected from <code class="docutils literal notranslate"><span class="pre">gdb</span></code>
(<code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">{i8*,</span> <span class="pre">i8*,</span> <span class="pre">i64,</span> <span class="pre">i64,</span> <span class="pre">double*,</span> <span class="pre">[1</span> <span class="pre">x</span> <span class="pre">i64],</span> <span class="pre">[1</span> <span class="pre">x</span> <span class="pre">i64]}</span></code>) corresponds
directly to the members of the <code class="docutils literal notranslate"><span class="pre">ArrayModel</span></code>. Given the segfault came from an
invalid access it would be informative to check the number of items in the array
and compare that to the index requested.</p>
<p>Examining the memory of <code class="docutils literal notranslate"><span class="pre">c</span></code>, (<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/32xb</span> <span class="pre">c</span></code>), the first 16 bytes are the two
<code class="docutils literal notranslate"><span class="pre">i8*</span></code> corresponding to the <code class="docutils literal notranslate"><span class="pre">meminfo</span></code> pointer and the <code class="docutils literal notranslate"><span class="pre">parent</span></code>
<code class="docutils literal notranslate"><span class="pre">pyobject</span></code>. The next two groups of 8 bytes are <code class="docutils literal notranslate"><span class="pre">i64</span></code>/<code class="docutils literal notranslate"><span class="pre">intp</span></code> types
corresponding to <code class="docutils literal notranslate"><span class="pre">nitems</span></code> and <code class="docutils literal notranslate"><span class="pre">itemsize</span></code> respectively. Evidently their
values are <code class="docutils literal notranslate"><span class="pre">0x0a</span></code> and <code class="docutils literal notranslate"><span class="pre">0x08</span></code>, this makes sense as the input array <code class="docutils literal notranslate"><span class="pre">a</span></code> has
10 elements and is of type <code class="docutils literal notranslate"><span class="pre">int64</span></code> which is 8 bytes wide. It’s therefore clear
that the segfault comes from an invalid access of index <code class="docutils literal notranslate"><span class="pre">1000000000</span></code> in an
array containing <code class="docutils literal notranslate"><span class="pre">10</span></code> items.</p>
</div>
<div class="section" id="adding-breakpoints-to-code">
<h3>1.17.8.4. Adding breakpoints to code<a class="headerlink" href="#adding-breakpoints-to-code" title="Permalink to this headline">¶</a></h3>
<p>The next example demonstrates using multiple breakpoints that are defined
through the invocation of the <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_breakpoint()</span></code> function:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span><span class="p">,</span> <span class="n">gdb_init</span><span class="p">,</span> <span class="n">gdb_breakpoint</span>

<span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">gdb_init</span><span class="p">()</span> <span class="c1"># instruct Numba to attach gdb at this location</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">gdb_breakpoint</span><span class="p">()</span> <span class="c1"># instruct gdb to break at this location</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mf">2.34</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">gdb_breakpoint</span><span class="p">()</span> <span class="c1"># and to break again at this location</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

<span class="n">r</span><span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal (<code class="docutils literal notranslate"><span class="pre">...</span></code> on a line by itself indicates output that is not
presented for brevity):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ NUMBA_OPT=0 python demo_gdb_breakpoints.py
</span>Attaching to PID: 20366
GNU gdb (GDB) Red Hat Enterprise Linux 8.0.1-36.el7
...
Attaching to process 20366
Reading symbols from &lt;elided for brevity&gt; ...done.
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.
Reading symbols from /lib64/libc.so.6...Reading symbols from /usr/lib/debug/usr/lib64/libc-2.17.so.debug...done.
0x00007f631db5e550 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
Breakpoint 1 at 0x7f6307b658f0: file numba/_helperlib.c, line 1090.
Continuing.

Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) step
</span>__main__::foo$241(long long) () at demo_gdb_breakpoints.py:8
8           c = a * 2.34
<span class="hll">(gdb) l
</span>3       @njit(debug=True)
4       def foo(a):
5           gdb_init() # instruct Numba to attach gdb at this location
6           b = a + 1
7           gdb_breakpoint() # instruct gdb to break at this location
8           c = a * 2.34
9           d = (a, b, c)
10          gdb_breakpoint() # and to break again at this location
11          print(a, b, c, d)
12
<span class="hll">(gdb) p b
</span>$1 = 124
<span class="hll">(gdb) p c
</span>$2 = 0
<span class="hll">(gdb) continue
</span>Continuing.

Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) step
</span>11          print(a, b, c, d)
<span class="hll">(gdb) p c
</span>$3 = 287.81999999999999
</pre></div>
</div>
<p>From the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> output it can be seen that execution paused at line 8 as a
breakpoint was hit, and after a <code class="docutils literal notranslate"><span class="pre">continue</span></code> was issued, it broke again at line
11 where the next breakpoint was hit.</p>
</div>
<div class="section" id="debugging-in-parallel-regions">
<h3>1.17.8.5. Debugging in parallel regions<a class="headerlink" href="#debugging-in-parallel-regions" title="Permalink to this headline">¶</a></h3>
<p>The follow example is quite involved, it executes with <code class="docutils literal notranslate"><span class="pre">gdb</span></code> instrumentation
from the outset as per the example above, but it also uses threads and makes use
of the breakpoint functionality. Further, the last iteration of the parallel
section calls the function <code class="docutils literal notranslate"><span class="pre">work</span></code>, which is actually just a binding to
<code class="docutils literal notranslate"><span class="pre">glibc</span></code>’s <code class="docutils literal notranslate"><span class="pre">free(3)</span></code> in this case, but could equally be some involved
function that is presenting a segfault for unknown reasons.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span><span class="p">,</span> <span class="n">prange</span><span class="p">,</span> <span class="n">gdb_init</span><span class="p">,</span> <span class="n">gdb_breakpoint</span>
  <span class="kn">import</span> <span class="nn">ctypes</span>

  <span class="k">def</span> <span class="nf">get_free</span><span class="p">():</span>
      <span class="n">lib</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">cdll</span><span class="o">.</span><span class="n">LoadLibrary</span><span class="p">(</span><span class="s1">&#39;libc.so.6&#39;</span><span class="p">)</span>
      <span class="n">free_binding</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">free</span>
      <span class="n">free_binding</span><span class="o">.</span><span class="n">argtypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">,]</span>
      <span class="n">free_binding</span><span class="o">.</span><span class="n">restype</span> <span class="o">=</span> <span class="kc">None</span>
      <span class="k">return</span> <span class="n">free_binding</span>

  <span class="n">work</span> <span class="o">=</span> <span class="n">get_free</span><span class="p">()</span>

  <span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
      <span class="n">gdb_init</span><span class="p">()</span> <span class="c1"># instruct Numba to attach gdb at this location, but not to pause execution</span>
      <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">n</span> <span class="o">=</span> <span class="mi">9</span>
      <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">prange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
          <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span> <span class="c1"># iterations 4, 5, 6, 7 will break here</span>
              <span class="n">gdb_breakpoint</span><span class="p">()</span>

          <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span> <span class="c1"># last iteration segfaults</span>
              <span class="n">work</span><span class="p">(</span><span class="mh">0xBADADD</span><span class="p">)</span>

          <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="k">return</span> <span class="n">counter</span>

  <span class="n">r</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal (<code class="docutils literal notranslate"><span class="pre">...</span></code> on a line by itself indicates output that is not
presented for brevity), note the setting of <code class="docutils literal notranslate"><span class="pre">NUMBA_NUM_THREADS</span></code> to 4 to ensure
that there are 4 threads running in the parallel section:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ NUMBA_NUM_THREADS=4 NUMBA_OPT=0 python demo_gdb_threads.py
</span>Attaching to PID: 21462
...
Attaching to process 21462
[New LWP 21467]
[New LWP 21468]
[New LWP 21469]
[New LWP 21470]
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.
0x00007f59ec31756d in nanosleep () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
Breakpoint 1 at 0x7f59d631e8f0: file numba/_helperlib.c, line 1090.
Continuing.
[Switching to Thread 0x7f59d1fd1700 (LWP 21470)]

Thread 5 &quot;python&quot; hit Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) info threads
</span>Id   Target Id         Frame
1    Thread 0x7f59eca2f740 (LWP 21462) &quot;python&quot; pthread_cond_wait@@GLIBC_2.3.2 ()
    at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
2    Thread 0x7f59d37d4700 (LWP 21467) &quot;python&quot; pthread_cond_wait@@GLIBC_2.3.2 ()
    at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
3    Thread 0x7f59d2fd3700 (LWP 21468) &quot;python&quot; pthread_cond_wait@@GLIBC_2.3.2 ()
    at ../nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S:185
4    Thread 0x7f59d27d2700 (LWP 21469) &quot;python&quot; numba_gdb_breakpoint () at numba/_helperlib.c:1090
* 5    Thread 0x7f59d1fd1700 (LWP 21470) &quot;python&quot; numba_gdb_breakpoint () at numba/_helperlib.c:1090
<span class="hll">(gdb) thread apply 2-5 info locals
</span>
Thread 2 (Thread 0x7f59d37d4700 (LWP 21467)):
No locals.

Thread 3 (Thread 0x7f59d2fd3700 (LWP 21468)):
No locals.

Thread 4 (Thread 0x7f59d27d2700 (LWP 21469)):
No locals.

Thread 5 (Thread 0x7f59d1fd1700 (LWP 21470)):
sched$35 = &#39;\000&#39; &lt;repeats 55 times&gt;
counter__arr = &#39;\000&#39; &lt;repeats 16 times&gt;, &quot;\001\000\000\000\000\000\000\000\b\000\000\000\000\000\000\000\370B]\&quot;hU\000\000\001&quot;, &#39;\000&#39; &lt;repeats 14 times&gt;
counter = 0
<span class="hll">(gdb) continue
</span>Continuing.
[Switching to Thread 0x7f59d27d2700 (LWP 21469)]

Thread 4 &quot;python&quot; hit Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) continue
</span>Continuing.
[Switching to Thread 0x7f59d1fd1700 (LWP 21470)]

Thread 5 &quot;python&quot; hit Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) continue
</span>Continuing.
[Switching to Thread 0x7f59d27d2700 (LWP 21469)]

Thread 4 &quot;python&quot; hit Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
<span class="hll">(gdb) continue
</span>Continuing.

Thread 5 &quot;python&quot; received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7f59d1fd1700 (LWP 21470)]
__GI___libc_free (mem=0xbadadd) at malloc.c:2935
2935      if (chunk_is_mmapped(p))                       /* release mmapped memory. */
<span class="hll">(gdb) bt
</span>#0  __GI___libc_free (mem=0xbadadd) at malloc.c:2935
#1  0x00007f59d37ded84 in $3cdynamic$3e::__numba_parfor_gufunc__0x7ffff80a61ae3e31$244(Array&lt;unsigned long long, 1, C, mutable, aligned&gt;, Array&lt;long long, 1, C, mutable, aligned&gt;) () at &lt;string&gt;:24
#2  0x00007f59d17ce326 in __gufunc__._ZN13$3cdynamic$3e45__numba_parfor_gufunc__0x7ffff80a61ae3e31$244E5ArrayIyLi1E1C7mutable7alignedE5ArrayIxLi1E1C7mutable7alignedE ()
#3  0x00007f59d37d7320 in thread_worker ()
from &lt;path&gt;/numba/numba/npyufunc/workqueue.cpython-37m-x86_64-linux-gnu.so
#4  0x00007f59ec626e25 in start_thread (arg=0x7f59d1fd1700) at pthread_create.c:308
#5  0x00007f59ec350bad in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:113
</pre></div>
</div>
<p>In the output it can be seen that there are 4 threads launched and that they all
break at the breakpoint, further that <code class="docutils literal notranslate"><span class="pre">Thread</span> <span class="pre">5</span></code> receives a signal <code class="docutils literal notranslate"><span class="pre">SIGSEGV</span></code>
and that back tracing shows that it came from <code class="docutils literal notranslate"><span class="pre">__GI___libc_free</span></code> with the
invalid address in <code class="docutils literal notranslate"><span class="pre">mem</span></code>, as expected.</p>
</div>
<div class="section" id="using-the-gdb-command-language">
<h3>1.17.8.6. Using the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> command language<a class="headerlink" href="#using-the-gdb-command-language" title="Permalink to this headline">¶</a></h3>
<p>Both the <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_init()</span></code> functions accept unlimited
string arguments which will be passed directly to <code class="docutils literal notranslate"><span class="pre">gdb</span></code> as command line
arguments when it initializes, this makes it easy to set breakpoints on other
functions and perform repeated debugging tasks without having to manually type
them every time. For example, this code runs with <code class="docutils literal notranslate"><span class="pre">gdb</span></code> attached and sets a
breakpoint on <code class="docutils literal notranslate"><span class="pre">_dgesdd</span></code> (say for example the arguments passed to the LAPACK’s
double precision divide and conqueror SVD function need debugging).</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span>  <span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span><span class="p">,</span> <span class="n">gdb</span>
  <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

  <span class="nd">@njit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
      <span class="c1"># instruct Numba to attach gdb at this location and on launch, switch</span>
      <span class="c1"># breakpoint pending on , and then set a breakpoint on the function</span>
      <span class="c1"># _dgesdd, continue execution, and once the breakpoint is hit, backtrace</span>
      <span class="n">gdb</span><span class="p">(</span><span class="s1">&#39;-ex&#39;</span><span class="p">,</span> <span class="s1">&#39;set breakpoint pending on&#39;</span><span class="p">,</span>
          <span class="s1">&#39;-ex&#39;</span><span class="p">,</span> <span class="s1">&#39;b dgesdd_&#39;</span><span class="p">,</span>
          <span class="s1">&#39;-ex&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span>
          <span class="s1">&#39;-ex&#39;</span><span class="p">,</span><span class="s1">&#39;bt&#39;</span><span class="p">)</span>
      <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">10</span>
      <span class="n">u</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">vh</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">s</span> <span class="c1"># just return singular values</span>

  <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">70.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>In the terminal (<code class="docutils literal notranslate"><span class="pre">...</span></code> on a line by itself indicates output that is not
presented for brevity), note that no interaction is required to break and
backtrace:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="hll">$ NUMBA_OPT=0 python demo_gdb_args.py
</span>Attaching to PID: 22300
GNU gdb (GDB) Red Hat Enterprise Linux 8.0.1-36.el7
...
Attaching to process 22300
Reading symbols from &lt;py_env&gt;/bin/python3.7...done.
0x00007f652305a550 in __nanosleep_nocancel () at ../sysdeps/unix/syscall-template.S:81
81      T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
Breakpoint 1 at 0x7f650d0618f0: file numba/_helperlib.c, line 1090.
Continuing.

Breakpoint 1, numba_gdb_breakpoint () at numba/_helperlib.c:1090
1090    }
Breakpoint 2 at 0x7f65102322e0 (2 locations)
Continuing.

Breakpoint 2, 0x00007f65182be5f0 in mkl_lapack.dgesdd_ ()
from &lt;py_env&gt;/lib/python3.7/site-packages/numpy/core/../../../../libmkl_rt.so
#0  0x00007f65182be5f0 in mkl_lapack.dgesdd_ ()
from &lt;py_env&gt;/lib/python3.7/site-packages/numpy/core/../../../../libmkl_rt.so
#1  0x00007f650d065b71 in numba_raw_rgesdd (kind=kind@entry=100 &#39;d&#39;, jobz=&lt;optimized out&gt;, jobz@entry=65 &#39;A&#39;, m=m@entry=10,
    n=n@entry=7, a=a@entry=0x561c6fbb20c0, lda=lda@entry=10, s=0x561c6facf3a0, u=0x561c6fb680e0, ldu=10, vt=0x561c6fd375c0,
    ldvt=7, work=0x7fff4c926c30, lwork=-1, iwork=0x7fff4c926c40, info=0x7fff4c926c20) at numba/_lapack.c:1277
#2  0x00007f650d06768f in numba_ez_rgesdd (ldvt=7, vt=0x561c6fd375c0, ldu=10, u=0x561c6fb680e0, s=0x561c6facf3a0, lda=10,
    a=0x561c6fbb20c0, n=7, m=10, jobz=65 &#39;A&#39;, kind=&lt;optimized out&gt;) at numba/_lapack.c:1307
#3  numba_ez_gesdd (kind=&lt;optimized out&gt;, jobz=&lt;optimized out&gt;, m=10, n=7, a=0x561c6fbb20c0, lda=10, s=0x561c6facf3a0,
    u=0x561c6fb680e0, ldu=10, vt=0x561c6fd375c0, ldvt=7) at numba/_lapack.c:1477
#4  0x00007f650a3147a3 in numba::targets::linalg::svd_impl::$3clocals$3e::svd_impl$243(Array&lt;double, 2, C, mutable, aligned&gt;, omitted$28default$3d1$29) ()
#5  0x00007f650a1c0489 in __main__::foo$241(Array&lt;double, 2, C, mutable, aligned&gt;) () at demo_gdb_args.py:15
#6  0x00007f650a1c2110 in cpython::__main__::foo$241(Array&lt;double, 2, C, mutable, aligned&gt;) ()
#7  0x00007f650cd096a4 in call_cfunc ()
from &lt;path&gt;/numba/numba/_dispatcher.cpython-37m-x86_64-linux-gnu.so
...
</pre></div>
</div>
</div>
<div class="section" id="how-does-the-gdb-binding-work">
<h3>1.17.8.7. How does the <code class="docutils literal notranslate"><span class="pre">gdb</span></code> binding work?<a class="headerlink" href="#how-does-the-gdb-binding-work" title="Permalink to this headline">¶</a></h3>
<p>For advanced users and debuggers of Numba applications it’s important to know
some of the internal implementation details of the outlined <code class="docutils literal notranslate"><span class="pre">gdb</span></code> bindings.
The <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_init()</span></code> functions work by injecting the
following into the function’s LLVM IR:</p>
<ul class="simple">
<li><p>At the call site of the function first inject a call to <code class="docutils literal notranslate"><span class="pre">getpid(3)</span></code> to get
the PID of the executing process and store this for use later, then inject a
<code class="docutils literal notranslate"><span class="pre">fork(3)</span></code> call:</p>
<ul>
<li><p>In the parent:</p>
<ul>
<li><p>Inject a call <code class="docutils literal notranslate"><span class="pre">sleep(3)</span></code> (hence the pause whilst <code class="docutils literal notranslate"><span class="pre">gdb</span></code> loads).</p></li>
<li><p>Inject a call to the <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> function (only
<code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> does this).</p></li>
</ul>
</li>
<li><p>In the child:</p>
<ul>
<li><p>Inject a call to <code class="docutils literal notranslate"><span class="pre">execl(3)</span></code> with the arguments
<code class="docutils literal notranslate"><span class="pre">numba.config.GDB_BINARY</span></code>, the <code class="docutils literal notranslate"><span class="pre">attach</span></code> command and the PID recorded
earlier. Numba has a special <code class="docutils literal notranslate"><span class="pre">gdb</span></code> command file that contains
instructions to break on the symbol <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> and then
<code class="docutils literal notranslate"><span class="pre">finish</span></code>, this is to make sure that the program stops on the
breakpoint but the frame it stops in is the compiled Python frame (or
one <code class="docutils literal notranslate"><span class="pre">step</span></code> away from, depending on optimisation). This command file is
also added to the arguments and finally and any user specified arguments
are added.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>At the call site of a <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_breakpoint()</span></code> a call is injected to the
special <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> symbol, which is already registered and
instrumented as a place to break and <code class="docutils literal notranslate"><span class="pre">finish</span></code> immediately.</p>
<p>As a result of this, a e.g. <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb()</span></code> call will cause a fork in the
program, the parent will sleep whilst the child launches <code class="docutils literal notranslate"><span class="pre">gdb</span></code> and attaches it
to the parent and tells the parent to continue. The launched <code class="docutils literal notranslate"><span class="pre">gdb</span></code> has the
<code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code> symbol registered as a breakpoint and when the parent
continues and stops sleeping it will immediately call <code class="docutils literal notranslate"><span class="pre">numba_gdb_breakpoint</span></code>
on which the child will break. Additional <code class="xref py py-func docutils literal notranslate"><span class="pre">numba.gdb_breakpoint()</span></code> calls
create calls to the registered breakpoint hence the program will also break at
these locations.</p>
</div>
</div>
<div class="section" id="debugging-cuda-python-code">
<h2>1.17.9. Debugging CUDA Python code<a class="headerlink" href="#debugging-cuda-python-code" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-the-simulator">
<h3>1.17.9.1. Using the simulator<a class="headerlink" href="#using-the-simulator" title="Permalink to this headline">¶</a></h3>
<p>CUDA Python code can be run in the Python interpreter using the CUDA Simulator,
allowing it to be debugged with the Python debugger or with print statements. To
enable the CUDA simulator, set the environment variable
<span class="target" id="index-2"></span><a class="reference internal" href="../reference/envvars.html#envvar-NUMBA_ENABLE_CUDASIM"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NUMBA_ENABLE_CUDASIM</span></code></a> to 1. For more information on the CUDA Simulator,
see <a class="reference internal" href="../cuda/simulator.html#simulator"><span class="std std-ref">the CUDA Simulator documentation</span></a>.</p>
</div>
<div class="section" id="debug-info">
<h3>1.17.9.2. Debug Info<a class="headerlink" href="#debug-info" title="Permalink to this headline">¶</a></h3>
<p>By setting the <code class="docutils literal notranslate"><span class="pre">debug</span></code> argument to <code class="docutils literal notranslate"><span class="pre">cuda.jit</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>
(<code class="docutils literal notranslate"><span class="pre">&#64;cuda.jit(debug=True)</span></code>), Numba will emit source location in the compiled
CUDA code.  Unlike the CPU target, only filename and line information are
available, but no variable type information is emitted.  The information
is sufficient to debug memory error with
<a class="reference external" href="http://docs.nvidia.com/cuda/cuda-memcheck/index.html">cuda-memcheck</a>.</p>
<p>For example, given the following cuda python code:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">cuda</span>

<span class="nd">@cuda</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="n">arr</span><span class="p">[</span><span class="n">cuda</span><span class="o">.</span><span class="n">threadIdx</span><span class="o">.</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">foo</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">](</span><span class="n">arr</span><span class="p">)</span>   <span class="c1"># more threads than array elements</span>
</pre></div>
</td></tr></table></div>
<p>We can use <code class="docutils literal notranslate"><span class="pre">cuda-memcheck</span></code> to find the memory error:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cuda-memcheck python chk_cuda_debug.py
========= CUDA-MEMCHECK
========= Invalid __global__ write of size 8
=========     at 0x00000148 in /home/user/chk_cuda_debug.py:6:cudapy::__main__::foo$241(Array&lt;__int64, int=1, C, mutable, aligned&gt;)
=========     by thread (31,0,0) in block (0,0,0)
=========     Address 0x500a600f8 is out of bounds
...
=========
========= Invalid __global__ write of size 8
=========     at 0x00000148 in /home/user/chk_cuda_debug.py:6:cudapy::__main__::foo$241(Array&lt;__int64, int=1, C, mutable, aligned&gt;)
=========     by thread (30,0,0) in block (0,0,0)
=========     Address 0x500a600f0 is out of bounds
...
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="1.18. Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cli.html" class="btn btn-neutral float-left" title="1.16. Command line interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2020, Anaconda, Inc. and others

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>