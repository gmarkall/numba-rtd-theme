

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.1. Overview &mdash; Numba 0.49.0dev0+639.ga41f4317f.dirty documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/numba-blue-icon-rgb.svg"/>
  
  
  
    <link rel="canonical" href="http://numba.pydata.org/numba-doc/latest/index.htmlroc/overview.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.2. Writing HSA Kernels" href="kernels.html" />
    <link rel="prev" title="5. Numba for AMD ROC GPUs" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00A3E0" >
          

          
            <a href="../index.html" class="icon icon-home"> Numba
          

          
            
            <img src="../_static/numba-white-icon-rgb.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.49
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">1. User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">2. Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuda/index.html">3. Numba for CUDA GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuda-reference/index.html">4. CUDA Python Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. Numba for AMD ROC GPUs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.1. Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#terminology">5.1.1. Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">5.1.2. Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">5.1.3. Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kernels.html">5.2. Writing HSA Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">5.3. Memory management</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-functions.html">5.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="intrinsics.html">5.5. Supported Atomic Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-management.html">5.6. The Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="ufunc.html">5.7. ROC Ufuncs and Generalized Ufuncs</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">5.8. Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">6. Extending Numba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">7. Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proposals/index.html">8. Numba Enhancement Proposals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">9. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">10. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Numba</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">5. Numba for AMD ROC GPUs</a> &raquo;</li>
        
      <li>5.1. Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/roc/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview">
<h1>5.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Numba supports <a class="reference external" href="https://rocm.github.io/">AMD ROC GPU</a> programming by directly
compiling a restricted subset of Python code into HSA kernels and device
functions following the HSA execution model. Kernels written in Numba appear to
have direct access to NumPy arrays.</p>
<div class="section" id="terminology">
<h2>5.1.1. Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<p>Several important terms in the topic of HSA programming are listed here:</p>
<ul class="simple">
<li><p><em>kernels</em>: a GPU function launched by the host and executed on the device</p></li>
<li><p><em>device function</em>: a GPU function executed on the device which can only be
called from the device (i.e. from a kernel or another device function)</p></li>
</ul>
</div>
<div class="section" id="requirements">
<h2>5.1.2. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/RadeonOpenCompute/ROCm#are-you-ready-to-rock">This document</a>
describes the requirements for using ROC. Essentially an AMD dGPU is needed
(Fiji, Polaris and Vega families) and a CPU which supports PCIe Gen3 and PCIe
Atomics (AMD Ryzen and EPYC, and Intel CPUs &gt;= Haswell), full details are in the
linked document. Further a linux operating system is needed, those supported and
tested are also listed in the linked document.</p>
</div>
<div class="section" id="installation">
<h2>5.1.3. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Follow <a class="reference external" href="https://github.com/RadeonOpenCompute/ROCm#installing-from-amd-rocm-repositories">this document</a>
for installation instructions to enable ROC support for the system.
Be sure to use the binary packages for the system’s linux distribution to
simplify the process. At this point the install should be tested by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ /opt/rocm/bin/rocminfo
</pre></div>
</div>
<p>the output of which should list at least two HSA Agents, at least one of which
should be a CPU and at least one of which should be a dGPU.</p>
<p>Assuming the installation is working correctly, the ROC support for Numba is
provided by the <code class="docutils literal notranslate"><span class="pre">roctools</span></code> package which can be installed via <code class="docutils literal notranslate"><span class="pre">conda</span></code>, along
with Numba, from the Numba channel as follows (creating an env called
<code class="docutils literal notranslate"><span class="pre">numba_roc</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda create -n numba_roc -c numba numba roctools
</pre></div>
</div>
<p>Activating the env, and then running the Numba diagnostic tool should confirm
that Numba is running with ROC support enabled, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source activate numba_roc
$ numba -s
</pre></div>
</div>
<p>The output of <code class="docutils literal notranslate"><span class="pre">numba</span> <span class="pre">-s</span></code> should contain a section similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__ROC</span> <span class="n">Information__</span>
<span class="n">ROC</span> <span class="n">available</span>                       <span class="p">:</span> <span class="kc">True</span>
<span class="n">Available</span> <span class="n">Toolchains</span>                <span class="p">:</span> <span class="n">librocmlite</span> <span class="n">library</span><span class="p">,</span> <span class="n">ROC</span> <span class="n">command</span> <span class="n">line</span> <span class="n">tools</span>

<span class="n">Found</span> <span class="mi">2</span> <span class="n">HSA</span> <span class="n">Agents</span><span class="p">:</span>
<span class="n">Agent</span> <span class="nb">id</span>  <span class="p">:</span> <span class="mi">0</span>
    <span class="n">vendor</span><span class="p">:</span> <span class="n">CPU</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Intel</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">Core</span><span class="p">(</span><span class="n">TM</span><span class="p">)</span> <span class="n">i7</span><span class="o">-</span><span class="mi">4790</span> <span class="n">CPU</span> <span class="o">@</span> <span class="mf">3.60</span><span class="n">GHz</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">CPU</span>

<span class="n">Agent</span> <span class="nb">id</span>  <span class="p">:</span> <span class="mi">1</span>
    <span class="n">vendor</span><span class="p">:</span> <span class="n">AMD</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">gfx803</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">GPU</span>

<span class="n">Found</span> <span class="mi">1</span> <span class="n">discrete</span> <span class="n">GPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>             <span class="p">:</span> <span class="n">gfx803</span>
</pre></div>
</div>
<p>confirming that ROC is available, listing the available toolchains and
displaying the HSA Agents and dGPU count.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="kernels.html" class="btn btn-neutral float-right" title="5.2. Writing HSA Kernels" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="5. Numba for AMD ROC GPUs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2020, Anaconda, Inc. and others

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>