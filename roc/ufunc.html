

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.7. ROC Ufuncs and Generalized Ufuncs &mdash; Numba 0.49.0dev0+639.ga41f4317f.dirty documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/numba-blue-icon-rgb.svg"/>
  
  
  
    <link rel="canonical" href="http://numba.pydata.org/numba-doc/latest/index.htmlroc/ufunc.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.8. Examples" href="examples.html" />
    <link rel="prev" title="5.6. The Agents" href="device-management.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #00A3E0" >
          

          
            <a href="../index.html" class="icon icon-home"> Numba
          

          
            
            <img src="../_static/numba-white-icon-rgb.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.49
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">1. User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">2. Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuda/index.html">3. Numba for CUDA GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuda-reference/index.html">4. CUDA Python Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">5. Numba for AMD ROC GPUs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">5.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernels.html">5.2. Writing HSA Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">5.3. Memory management</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-functions.html">5.4. Writing Device Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="intrinsics.html">5.5. Supported Atomic Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-management.html">5.6. The Agents</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.7. ROC Ufuncs and Generalized Ufuncs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-roc-ufunc-example">5.7.1. Basic ROC UFunc Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calling-device-functions-from-roc-ufuncs">5.7.2. Calling Device Functions from ROC UFuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generalized-roc-ufuncs">5.7.3. Generalized ROC ufuncs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#async-execution-a-chunk-at-a-time">5.7.4. Async execution: A Chunk at a Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">5.8. Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">6. Extending Numba</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">7. Developer Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proposals/index.html">8. Numba Enhancement Proposals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">9. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">10. Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Numba</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">5. Numba for AMD ROC GPUs</a> &raquo;</li>
        
      <li>5.7. ROC Ufuncs and Generalized Ufuncs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/roc/ufunc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="roc-ufuncs-and-generalized-ufuncs">
<h1>5.7. ROC Ufuncs and Generalized Ufuncs<a class="headerlink" href="#roc-ufuncs-and-generalized-ufuncs" title="Permalink to this headline">¶</a></h1>
<p>This page describes the ROC ufunc-like object.</p>
<p>To support the programming pattern of ROC programs, ROC Vectorize and
GUVectorize cannot produce a conventional ufunc.  Instead, a ufunc-like
object is returned.  This object is a close analog but not fully
compatible with a regular NumPy ufunc.  The ROC ufunc adds support for
passing intra-device arrays (already on the GPU device) to reduce
traffic over the PCI-express bus.  It also accepts a <cite>stream</cite> keyword
for launching in asynchronous mode.</p>
<div class="section" id="basic-roc-ufunc-example">
<h2>5.7.1. Basic ROC UFunc Example<a class="headerlink" href="#basic-roc-ufunc-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">vectorize</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="nd">@vectorize</span><span class="p">([</span><span class="s1">&#39;float32(float32, float32, float32)&#39;</span><span class="p">,</span>
            <span class="s1">&#39;float64(float64, float64, float64)&#39;</span><span class="p">],</span>
           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;roc&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">roc_discriminant</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">b</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span>

<span class="c1"># prepare the input</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>

<span class="n">D</span> <span class="o">=</span> <span class="n">roc_discriminant</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>  <span class="c1"># print result</span>
</pre></div>
</div>
</div>
<div class="section" id="calling-device-functions-from-roc-ufuncs">
<h2>5.7.2. Calling Device Functions from ROC UFuncs<a class="headerlink" href="#calling-device-functions-from-roc-ufuncs" title="Permalink to this headline">¶</a></h2>
<p>All ROC ufunc kernels have the ability to call other ROC device functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">vectorize</span><span class="p">,</span> <span class="n">roc</span>

<span class="c1"># define a device function</span>
<span class="nd">@roc</span><span class="o">.</span><span class="n">jit</span><span class="p">(</span><span class="s1">&#39;float32(float32, float32, float32)&#39;</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">roc_device_fn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">y</span> <span class="o">/</span> <span class="n">z</span>

<span class="c1"># define a ufunc that calls our device function</span>
<span class="nd">@vectorize</span><span class="p">([</span><span class="s1">&#39;float32(float32, float32, float32)&#39;</span><span class="p">],</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;roc&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">roc_ufunc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">roc_device_fn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="generalized-roc-ufuncs">
<h2>5.7.3. Generalized ROC ufuncs<a class="headerlink" href="#generalized-roc-ufuncs" title="Permalink to this headline">¶</a></h2>
<p>Generalized ufuncs may be executed on the GPU using ROC, analogous to
the ROC ufunc functionality.  This may be accomplished as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">guvectorize</span>

<span class="nd">@guvectorize</span><span class="p">([</span><span class="s1">&#39;void(float32[:,:], float32[:,:], float32[:,:])&#39;</span><span class="p">],</span>
             <span class="s1">&#39;(m,n),(n,p)-&gt;(m,p)&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;roc&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">matmulcore</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="examples.html#roc-matmul"><span class="std std-ref">Matrix multiplication example</span></a>.</p>
</div>
</div>
<div class="section" id="async-execution-a-chunk-at-a-time">
<h2>5.7.4. Async execution: A Chunk at a Time<a class="headerlink" href="#async-execution-a-chunk-at-a-time" title="Permalink to this headline">¶</a></h2>
<p>Partitioning your data into chunks allows computation and memory transfer
to be overlapped.  This can increase the throughput of your ufunc and
enables your ufunc to operate on data that is larger than the memory
capacity of your GPU.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">vectorize</span><span class="p">,</span> <span class="n">roc</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># the ufunc kernel</span>
<span class="k">def</span> <span class="nf">discriminant</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">b</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span>

<span class="n">roc_discriminant</span> <span class="o">=</span> <span class="n">vectorize</span><span class="p">([</span><span class="s1">&#39;float32(float32, float32, float32)&#39;</span><span class="p">],</span>
                            <span class="n">target</span><span class="o">=</span><span class="s1">&#39;roc&#39;</span><span class="p">)(</span><span class="n">discriminant</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">1e+8</span><span class="p">)</span>
<span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span>

<span class="c1"># prepare the input</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">N</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">A</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>

<span class="c1"># create a ROC stream</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">stream</span><span class="p">()</span>

<span class="n">chunksize</span> <span class="o">=</span> <span class="mf">1e+6</span>
<span class="n">chunkcount</span> <span class="o">=</span> <span class="n">N</span> <span class="o">//</span> <span class="n">chunksize</span>

<span class="c1"># partition numpy arrays into chunks</span>
<span class="c1"># no copying is performed</span>
<span class="n">sA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">chunkcount</span><span class="p">)</span>
<span class="n">sB</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">chunkcount</span><span class="p">)</span>
<span class="n">sC</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">chunkcount</span><span class="p">)</span>
<span class="n">sD</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">chunkcount</span><span class="p">)</span>

<span class="n">device_ptrs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># helper function, async requires operation on coarsegrain memory regions</span>
<span class="k">def</span> <span class="nf">async_array</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
    <span class="n">coarse_arr</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">coarsegrain_array</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">arr</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
    <span class="n">coarse_arr</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">arr</span>
    <span class="k">return</span> <span class="n">coarse_arr</span>

<span class="k">with</span> <span class="n">stream</span><span class="o">.</span><span class="n">auto_synchronize</span><span class="p">():</span>
    <span class="c1"># every operation in this context with be launched asynchronously</span>
    <span class="c1"># by using the ROC stream</span>

    <span class="n">dchunks</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># holds the result chunks</span>

    <span class="c1"># for each chunk</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sA</span><span class="p">,</span> <span class="n">sB</span><span class="p">,</span> <span class="n">sC</span><span class="p">,</span> <span class="n">sD</span><span class="p">):</span>
        <span class="c1"># create coarse grain arrays</span>
        <span class="n">asyncA</span> <span class="o">=</span> <span class="n">async_array</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">asyncB</span> <span class="o">=</span> <span class="n">async_array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">asyncC</span> <span class="o">=</span> <span class="n">async_array</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="n">asyncD</span> <span class="o">=</span> <span class="n">async_array</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

        <span class="c1"># transfer to device</span>
        <span class="n">dA</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">to_device</span><span class="p">(</span><span class="n">asyncA</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">dB</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">to_device</span><span class="p">(</span><span class="n">asyncB</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">dC</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">to_device</span><span class="p">(</span><span class="n">asyncC</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">dD</span> <span class="o">=</span> <span class="n">roc</span><span class="o">.</span><span class="n">to_device</span><span class="p">(</span><span class="n">asyncD</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># no copying</span>

        <span class="c1"># launch kernel</span>
        <span class="n">roc_discriminant</span><span class="p">(</span><span class="n">dA</span><span class="p">,</span> <span class="n">dB</span><span class="p">,</span> <span class="n">dC</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">dD</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>

        <span class="c1"># retrieve result</span>
        <span class="n">dD</span><span class="o">.</span><span class="n">copy_to_host</span><span class="p">(</span><span class="n">asyncD</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>

        <span class="c1"># store device pointers to prevent them from freeing before</span>
        <span class="c1"># the kernel is scheduled</span>
        <span class="n">device_ptrs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">dA</span><span class="p">,</span> <span class="n">dB</span><span class="p">,</span> <span class="n">dC</span><span class="p">,</span> <span class="n">dD</span><span class="p">])</span>

        <span class="c1"># store result reference</span>
        <span class="n">dchunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asyncD</span><span class="p">)</span>

<span class="c1"># put result chunks into the output array &#39;D&#39;</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dchunks</span><span class="p">):</span>
    <span class="n">sD</span><span class="p">[</span><span class="n">i</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[:]</span>

<span class="c1"># data is ready at this point inside D</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="5.8. Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="device-management.html" class="btn btn-neutral float-left" title="5.6. The Agents" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2020, Anaconda, Inc. and others

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>